# å¸‚çº§ç®¡ç†å‘˜å¿åŸŸç»Ÿè®¡éœ€æ±‚å¯è¡Œæ€§åˆ†æ

**åˆ†ææ—¥æœŸï¼š** 2024-10-31  
**éœ€æ±‚çŠ¶æ€ï¼š** âœ… **å¯ä»¥å®ç°**  
**å®ç°éš¾åº¦ï¼š** ä¸­ç­‰  
**é¢„è®¡å·¥ä½œé‡ï¼š** 3-5 å¤©

---

## éœ€æ±‚æè¿°

å¸‚çº§ç®¡ç†å‘˜å‘èµ·æ´»åŠ¨æ—¶ï¼Œèƒ½å¤Ÿï¼š
1. âœ… ç»Ÿè®¡å„å¿ä»½çš„æ‰“å¡æƒ…å†µ
2. âœ… æŸ¥çœ‹å„å¿ä¸­å‚ä¸æ‰“å¡çš„æ•™å­¦ç‚¹æ•°é‡åˆ†å¸ƒ
3. âœ… æŸ¥çœ‹æ•´ä¸ªå¿æŠ¥å¤‡çš„äººæ•°æ€»å’Œ
4. âœ… æ´»åŠ¨è¯¦æƒ…ä¸­å±•ç¤ºæ‰€æœ‰å·²å‚ä¸æ‰“å¡çš„æ•™å­¦ç‚¹ä¿¡æ¯ï¼ˆæ•™å­¦ç‚¹åç§°ã€å‚ä¸äººæ•°ã€æ‰“å¡æ—¶é—´ï¼‰
5. âœ… å¯ä»¥æ ¹æ®å¿åŸŸè¿›è¡Œåˆ’åˆ†æŸ¥çœ‹

---

## å¯è¡Œæ€§åˆ†æ

### 1ï¸âƒ£ ç°æœ‰æ•°æ®ç»“æ„åˆ†æ

#### æ´»åŠ¨è¡¨ï¼ˆactivitiesï¼‰
```java
// Activity.java å…³é”®å­—æ®µ
@TableField("scope_county_code")
private String scopeCountyCode;  // âœ… åŒ…å«å¿åŸŸç¼–ç 
```

**ç»“è®ºï¼š** âœ… æ´»åŠ¨å·²åŒ…å« `scopeCountyCode` å­—æ®µï¼Œæ”¯æŒå¿åŸŸèŒƒå›´è®¾ç½®

#### æ‰“å¡è¡¨ï¼ˆcheckinsï¼‰
```java
// Checkin.java å…³é”®å­—æ®µ
@TableField("activity_id")
private Long activityId;           // âœ… æ´»åŠ¨ID

@TableField("teaching_point_id")
private Long teachingPointId;      // âœ… æ•™å­¦ç‚¹ID

@TableField("attendee_count")
private Integer attendeeCount;     // âœ… å‚ä¸äººæ•°
```

**é—®é¢˜ï¼š** âŒ Checkin è¡¨ä¸­**æ²¡æœ‰ç›´æ¥å­˜å‚¨å¿åŸŸä¿¡æ¯**

**è§£å†³æ–¹æ¡ˆï¼š** éœ€è¦é€šè¿‡æ•™å­¦ç‚¹è¡¨ (`teaching_points`) å…³è”å¿åŸŸä¿¡æ¯

#### æ•™å­¦ç‚¹è¡¨ï¼ˆteaching_pointsï¼‰- å‡è®¾ç»“æ„
```sql
-- å‡è®¾è¡¨ç»“æ„ï¼ˆéœ€è¦ç¡®è®¤ï¼‰
CREATE TABLE teaching_points (
    id BIGINT PRIMARY KEY,
    name VARCHAR(255),
    county_code VARCHAR(50),  -- âœ… å¿åŸŸç¼–ç 
    ...
);
```

**ç»“è®ºï¼š** éœ€è¦ç¡®è®¤æ•™å­¦ç‚¹è¡¨æ˜¯å¦å­˜åœ¨ä¸”åŒ…å«å¿åŸŸç¼–ç 

### 2ï¸âƒ£ æƒé™éš”ç¦»åˆ†æ

#### å½“å‰æƒé™è®¾è®¡
- âœ… å¸‚çº§ç®¡ç†å‘˜ï¼ˆCITYï¼‰ï¼šå¯æŸ¥çœ‹å…¨å¸‚æ‰€æœ‰æ´»åŠ¨
- âœ… å¿çº§ç®¡ç†å‘˜ï¼ˆCOUNTYï¼‰ï¼šä»…æŸ¥çœ‹æœ¬å¿æ´»åŠ¨
- âœ… Activity è¡¨å·²æ”¯æŒæƒé™éš”ç¦»

**ç»“è®ºï¼š** âœ… æƒé™æ¡†æ¶å·²å®Œå–„ï¼Œå¸‚çº§ç®¡ç†å‘˜å¯è®¿é—®æ‰€æœ‰æ•°æ®

---

## å®ç°æ–¹æ¡ˆ

### ğŸ“‹ æ–¹æ¡ˆ1ï¼šæ·»åŠ æ–°çš„ç»Ÿè®¡æ¥å£ï¼ˆæ¨èï¼‰

#### æ–°å¢API

```java
// ActivityService.java - æ·»åŠ æ–°æ–¹æ³•
public interface ActivityService {
    
    /**
     * æŒ‰å¿åŸŸç»Ÿè®¡æ´»åŠ¨æ‰“å¡æƒ…å†µ
     * 
     * @param activityId æ´»åŠ¨ID
     * @return å¿åŸŸæ‰“å¡ç»Ÿè®¡åˆ—è¡¨
     */
    List<CountyCheckinStatisticsVO> getCountyCheckinStatistics(Long activityId);
    
    /**
     * è·å–æ´»åŠ¨çš„æ‰€æœ‰æ‰“å¡è¯¦æƒ…ï¼ˆæŒ‰å¿åŸŸåˆ†ç»„ï¼‰
     * 
     * @param activityId æ´»åŠ¨ID
     * @param countyCode å¿åŸŸç¼–ç ï¼ˆå¯é€‰ï¼‰
     * @return æ‰“å¡è¯¦æƒ…åˆ—è¡¨
     */
    Page<CheckinDetailVO> getCheckinDetailsByCounty(Long activityId, String countyCode, 
                                                     int page, int size);
}
```

#### æ–°å¢VOå¯¹è±¡

```java
// CountyCheckinStatisticsVO.java - å¿åŸŸæ‰“å¡ç»Ÿè®¡
@Data
@Builder
public class CountyCheckinStatisticsVO {
    private String countyCode;              // å¿åŸŸç¼–ç 
    private String countyName;              // å¿åŸŸåç§°
    private Integer participatingPoints;    // å‚ä¸æ‰“å¡çš„æ•™å­¦ç‚¹æ•°
    private Integer totalAttendees;         // ç´¯è®¡å‚ä¸äººæ•°
    private Integer totalCheckins;          // æ‰“å¡è®°å½•æ€»æ•°
}

// CheckinDetailVO.java - æ‰“å¡è¯¦æƒ…
@Data
@Builder
public class CheckinDetailVO {
    private Long id;                        // æ‰“å¡ID
    private Long teachingPointId;           // æ•™å­¦ç‚¹ID
    private String teachingPointName;       // æ•™å­¦ç‚¹åç§°
    private String countyCode;              // å¿åŸŸç¼–ç 
    private String countyName;              // å¿åŸŸåç§°
    private Integer attendeeCount;          // å‚ä¸äººæ•°
    private LocalDateTime submittedTime;    // æ‰“å¡æ—¶é—´
}
```

#### æ ¸å¿ƒSQLæŸ¥è¯¢

```sql
-- æŒ‰å¿åŸŸç»Ÿè®¡æ‰“å¡æƒ…å†µ
SELECT 
    tp.county_code AS countyCode,
    COUNT(DISTINCT c.teaching_point_id) AS participatingPoints,
    COALESCE(SUM(c.attendee_count), 0) AS totalAttendees,
    COUNT(*) AS totalCheckins
FROM checkins c
LEFT JOIN teaching_points tp ON c.teaching_point_id = tp.id
WHERE c.activity_id = #{activityId}
GROUP BY tp.county_code
ORDER BY tp.county_code;

-- è·å–æ‰“å¡è¯¦æƒ…ï¼ˆå¯æŒ‰å¿åŸŸè¿‡æ»¤ï¼‰
SELECT 
    c.id,
    c.teaching_point_id,
    tp.name AS teachingPointName,
    tp.county_code,
    c.attendee_count,
    c.submitted_time
FROM checkins c
LEFT JOIN teaching_points tp ON c.teaching_point_id = tp.id
WHERE c.activity_id = #{activityId}
    AND (#{countyCode} IS NULL OR tp.county_code = #{countyCode})
ORDER BY c.submitted_time DESC
LIMIT #{offset}, #{size};
```

#### ä¿®æ”¹ç°æœ‰æ´»åŠ¨è¯¦æƒ…

```java
// ActivityDetailVO.java - æ‰©å±•
@Data
@Builder
public class ActivityDetailVO {
    // ... ç°æœ‰å­—æ®µ ...
    
    // æ–°å¢å­—æ®µ
    private List<CountyCheckinStatisticsVO> countyStatistics;  // å¿åŸŸç»Ÿè®¡åˆ—è¡¨
    private List<CheckinDetailVO> checkinDetails;              // æ‰“å¡è¯¦æƒ…åˆ—è¡¨
}
```

---

### ğŸ“‹ æ–¹æ¡ˆ2ï¼šæ‰©å±•ç°æœ‰æŸ¥è¯¢æ–¹æ³•

#### ä¿®æ”¹ç°æœ‰çš„ getActivityDetail æ–¹æ³•

```java
@Override
public ActivityDetailVO getActivityDetail(Long activityId, String adminRole, String countyCode) {
    // ... ç°æœ‰ä»£ç  ...
    
    // å¦‚æœæ˜¯å¸‚çº§ç®¡ç†å‘˜ï¼Œè¿”å›å¿åŸŸç»Ÿè®¡
    List<CountyCheckinStatisticsVO> countyStatistics = null;
    if ("city".equals(adminRole)) {
        countyStatistics = getCountyCheckinStatistics(activityId);
    }
    
    // è¿”å›è¯¦æƒ…æ—¶åŒ…å«å¿åŸŸç»Ÿè®¡
    return ActivityDetailVO.builder()
            .activity(convertToVO(activity))
            .participatedCount(participatedCount)
            .totalAttendees(totalAttendees)
            .evaluationCount(evaluationCount)
            .countyStatistics(countyStatistics)  // æ–°å¢
            .qrCodes(qrCodes)
            .build();
}
```

---

## å®ç°æ­¥éª¤

### Step 1ï¸âƒ£ï¼šç¡®è®¤æ•™å­¦ç‚¹è¡¨ç»“æ„

```java
// éªŒè¯æ•™å­¦ç‚¹è¡¨æ˜¯å¦å­˜åœ¨ä¸”åŒ…å«å¿åŸŸä¿¡æ¯
// éœ€è¦æŸ¥çœ‹æ•°æ®åº“è®¾è®¡æ–‡æ¡£æˆ–æ•™å­¦ç‚¹å®ä½“å®šä¹‰
```

**æ£€æŸ¥é¡¹ï¼š**
- âœ… æ•™å­¦ç‚¹è¡¨åç§°å’Œå­—æ®µ
- âœ… å¿åŸŸå­—æ®µåç§°ï¼ˆå¦‚ `county_code` æˆ– `district_code`ï¼‰
- âœ… æ˜¯å¦æœ‰å¯¹åº”çš„ Java å®ä½“ç±»

### Step 2ï¸âƒ£ï¼šåˆ›å»º VO å¯¹è±¡

- åˆ›å»º `CountyCheckinStatisticsVO.java`ï¼ˆå¿åŸŸç»Ÿè®¡VOï¼‰
- åˆ›å»º `CheckinDetailVO.java`ï¼ˆæ‰“å¡è¯¦æƒ…VOï¼‰
- ä¿®æ”¹ `ActivityDetailVO.java`

### Step 3ï¸âƒ£ï¼šæ‰©å±• Mapper å’Œ SQL

```java
// ActivityMapper.java - æ·»åŠ æ–°çš„æŸ¥è¯¢æ–¹æ³•
@Select("SELECT tp.county_code, COUNT(DISTINCT c.teaching_point_id) as points, " +
        "COALESCE(SUM(c.attendee_count), 0) as attendees " +
        "FROM checkins c " +
        "LEFT JOIN teaching_points tp ON c.teaching_point_id = tp.id " +
        "WHERE c.activity_id = #{activityId} " +
        "GROUP BY tp.county_code")
List<CountyStatisticEntity> selectCountyStatistics(@Param("activityId") Long activityId);
```

### Step 4ï¸âƒ£ï¼šå®ç° Service æ–¹æ³•

åœ¨ `ActivityServiceImpl.java` ä¸­å®ç°ï¼š
- `getCountyCheckinStatistics(Long activityId)`
- æ‰©å±•çš„ `getActivityDetail()` æ–¹æ³•

### Step 5ï¸âƒ£ï¼šæ›´æ–° Controller

åœ¨ `ActivityController.java` ä¸­çš„ `getActivityDetail` æ¥å£ä¼šè‡ªåŠ¨è¿”å›æ–°å­—æ®µ

### Step 6ï¸âƒ£ï¼šæµ‹è¯•

- å•å…ƒæµ‹è¯•ï¼šæ–°å¢ç»Ÿè®¡æ–¹æ³•
- é›†æˆæµ‹è¯•ï¼šå®Œæ•´çš„æ´»åŠ¨è¯¦æƒ…æŸ¥è¯¢
- æƒé™æµ‹è¯•ï¼šç¡®è®¤å¸‚çº§/å¿çº§ç®¡ç†å‘˜çš„è¡Œä¸ºå·®å¼‚

---

## æ•°æ®æµç¤ºä¾‹

```
å¸‚çº§ç®¡ç†å‘˜æŸ¥è¯¢æ´»åŠ¨è¯¦æƒ…
    â†“
GET /api/activities/{activityId}/detail
    â†“
ActivityController.getActivityDetail()
    â†“
ActivityService.getActivityDetail()
    â”œâ”€ æŸ¥è¯¢æ´»åŠ¨åŸºæœ¬ä¿¡æ¯
    â”œâ”€ æŸ¥è¯¢æ€»çš„ç»Ÿè®¡æ•°æ®
    â”œâ”€ æŸ¥è¯¢å¿åŸŸåˆ†å¸ƒç»Ÿè®¡ â† NEW
    â”œâ”€ æŸ¥è¯¢æ‰“å¡è¯¦æƒ…åˆ—è¡¨ â† NEW
    â””â”€ æŸ¥è¯¢äºŒç»´ç ä¿¡æ¯
    â†“
è¿”å›å¢å¼ºçš„ ActivityDetailVO
    â”œâ”€ activity: æ´»åŠ¨åŸºæœ¬ä¿¡æ¯
    â”œâ”€ participatedCount: æ€»å‚ä¸ç‚¹æ•°
    â”œâ”€ totalAttendees: æ€»å‚ä¸äººæ•°
    â”œâ”€ evaluationCount: è¯„ä»·æ•°
    â”œâ”€ countyStatistics: [        â† NEW
    â”‚   {
    â”‚     countyCode: "001",
    â”‚     countyName: "æœé˜³åŒº",
    â”‚     participatingPoints: 15,
    â”‚     totalAttendees: 150
    â”‚   },
    â”‚   ...
    â”‚ ]
    â”œâ”€ checkinDetails: [          â† NEW
    â”‚   {
    â”‚     id: 1,
    â”‚     teachingPointName: "ç¬¬ä¸€å°å­¦",
    â”‚     countyName: "æœé˜³åŒº",
    â”‚     attendeeCount: 30,
    â”‚     submittedTime: "2024-03-15T14:30:00"
    â”‚   },
    â”‚   ...
    â”‚ ]
    â””â”€ qrCodes: äºŒç»´ç åˆ—è¡¨
```

---

## å‰ç«¯å±•ç¤ºç¤ºä¾‹

### å¿åŸŸç»Ÿè®¡è¡¨æ ¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¿åŸŸ    â”‚ æ•™å­¦ç‚¹æ•° â”‚ ç´¯è®¡äººæ•°   â”‚ æ‰“å¡è®°å½•æ•°   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æœé˜³åŒº  â”‚ 15       â”‚ 150        â”‚ 15           â”‚
â”‚ ä¸°å°åŒº  â”‚ 12       â”‚ 120        â”‚ 12           â”‚
â”‚ ä¸œåŸåŒº  â”‚ 10       â”‚ 95         â”‚ 10           â”‚
â”‚ åˆè®¡    â”‚ 37       â”‚ 365        â”‚ 37           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‰“å¡è¯¦æƒ…è¡¨æ ¼ï¼ˆæŒ‰å¿åŸŸåˆ†ç»„ï¼‰
```
æœé˜³åŒº (15ä¸ªæ•™å­¦ç‚¹ï¼Œ150äºº)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•™å­¦ç‚¹åç§°   â”‚ å‚ä¸äººæ•° â”‚ æ‰“å¡æ—¶é—´             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬ä¸€å°å­¦     â”‚ 30       â”‚ 2024-03-15 14:30:00  â”‚
â”‚ ç¬¬äºŒå°å­¦     â”‚ 25       â”‚ 2024-03-15 15:00:00  â”‚
â”‚ ...          â”‚ ...      â”‚ ...                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸°å°åŒº (12ä¸ªæ•™å­¦ç‚¹ï¼Œ120äºº)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ä¸‰å°å­¦     â”‚ 28       â”‚ 2024-03-15 14:45:00  â”‚
â”‚ ...          â”‚ ...      â”‚ ...                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å‰ç½®æ¡ä»¶ä¸æ³¨æ„äº‹é¡¹

### âš ï¸ å…³é”®å‰ç½®æ¡ä»¶

1. **æ•™å­¦ç‚¹è¡¨ç¡®è®¤**
   - â“ ç³»ç»Ÿæ˜¯å¦å­˜åœ¨ `teaching_points` è¡¨
   - â“ è¡¨ä¸­æ˜¯å¦åŒ…å« `county_code` æˆ–ç±»ä¼¼çš„å¿åŸŸå­—æ®µ
   - â“ æ˜¯å¦æœ‰å¯¹åº”çš„ Java å®ä½“ç±»

2. **æ•™å­¦ç‚¹IDæœ‰æ•ˆæ€§**
   - â“ æ‰€æœ‰æ‰“å¡è®°å½•ä¸­çš„ `teaching_point_id` æ˜¯å¦éƒ½å¯¹åº”æœ‰æ•ˆçš„æ•™å­¦ç‚¹
   - â“ æ˜¯å¦å­˜åœ¨å­¤ç«‹çš„æ‰“å¡è®°å½•ï¼ˆæ— å¯¹åº”æ•™å­¦ç‚¹ï¼‰

3. **æ•°æ®å®Œæ•´æ€§**
   - âœ… æ´»åŠ¨è¡¨çš„ `scope_county_code` æ˜¯å¦æœ‰æ•ˆ
   - âœ… æ‰“å¡è¡¨çš„æ•°æ®æ˜¯å¦å®Œæ•´

### âš ï¸ å®ç°æ³¨æ„äº‹é¡¹

1. **æ€§èƒ½è€ƒè™‘**
   - å¤§æ•°æ®é‡æ´»åŠ¨æ—¶ï¼ŒLEFT JOIN å¯èƒ½å½±å“æ€§èƒ½
   - å»ºè®®æ·»åŠ å¿…è¦çš„ç´¢å¼•ï¼š
    ```sql
    CREATE INDEX idx_checkins_teaching_point ON checkins(teaching_point_id);
    CREATE INDEX idx_teaching_points_county ON teaching_points(county_code);
    ```

2. **ç©ºå€¼å¤„ç†**
   - æŸäº›æ•™å­¦ç‚¹å¯èƒ½æ²¡æœ‰å¿åŸŸä¿¡æ¯ï¼Œéœ€è¦å¤„ç† NULL å€¼
   - å»ºè®®å°†å…¶ä½œä¸º"æœªåˆ†ç±»"å•ç‹¬ç»Ÿè®¡

3. **æƒé™æ£€æŸ¥**
   - å¸‚çº§ç®¡ç†å‘˜å¯æŸ¥çœ‹å…¨éƒ¨
   - å¿çº§ç®¡ç†å‘˜ä»…æŸ¥çœ‹æœ¬å¿ï¼ˆå·²é€šè¿‡ ActivityServiceImpl.validateActivityPermission ä¿è¯ï¼‰

4. **æ•°æ®é‡é™åˆ¶**
   - æ‰“å¡è¯¦æƒ…åˆ—è¡¨éœ€è¦åˆ†é¡µå¤„ç†
   - é¿å…ä¸€æ¬¡æ€§è¿”å›å¤§é‡æ•°æ®

---

## å®ç°å·¥ä½œåˆ†è§£

| ä»»åŠ¡ | å·¥ä½œé‡ | éš¾åº¦ |
|------|--------|------|
| 1. ç¡®è®¤æ•™å­¦ç‚¹è¡¨ç»“æ„ | 0.5 å¤© | ä½ |
| 2. åˆ›å»º VO å¯¹è±¡ | 0.5 å¤© | ä½ |
| 3. æ‰©å±• Mapper å’Œ SQL | 1 å¤© | ä¸­ |
| 4. å®ç° Service æ–¹æ³• | 1 å¤© | ä¸­ |
| 5. å•å…ƒæµ‹è¯• | 0.5 å¤© | ä¸­ |
| 6. é›†æˆæµ‹è¯• | 0.5 å¤© | ä¸­ |
| **æ€»è®¡** | **3-4 å¤©** | **ä¸­** |

---

## ä¾èµ–å…³ç³»

```
éœ€æ±‚å®ç°ä¾èµ–ï¼š
â””â”€ æ•™å­¦ç‚¹è¡¨ç¡®è®¤ âœ“ (éœ€è¦ç¡®è®¤)
   â”œâ”€ åˆ›å»º VO å¯¹è±¡
   â”œâ”€ åˆ›å»º Mapper æŸ¥è¯¢
   â””â”€ å®ç° Service é€»è¾‘
       â””â”€ æ›´æ–° ActivityDetailVO
           â””â”€ å‰ç«¯å±•ç¤º
```

---

## æ€»ä½“ç»“è®º

### âœ… **éœ€æ±‚å®Œå…¨å¯ä»¥å®ç°**

**å®ç°å¯è¡Œæ€§ï¼š** ğŸŸ¢ é«˜  
**æŠ€æœ¯å¤æ‚åº¦ï¼š** ğŸŸ¡ ä¸­  
**é¢„è®¡å·¥ä½œé‡ï¼š** 3-4 å¤©  
**é£é™©ç­‰çº§ï¼š** ğŸŸ¢ ä½  

### å…³é”®è¦ç‚¹

1. âœ… ç³»ç»Ÿæ¶æ„æ”¯æŒå¿åŸŸéš”ç¦»è®¾è®¡
2. âœ… ç°æœ‰æƒé™æ¡†æ¶å®Œå–„
3. â“ **éœ€è¦ç¡®è®¤æ•™å­¦ç‚¹è¡¨ç»“æ„**ï¼ˆè¿™æ˜¯å”¯ä¸€çš„å‰ç½®æ¡ä»¶ï¼‰
4. âœ… å®ç°æ–¹æ¡ˆæ¸…æ™°ï¼Œå·¥ä½œé‡å¯æ§

### å»ºè®®ä¸‹ä¸€æ­¥

1. **ä¼˜å…ˆçº§1ï¼š** ç¡®è®¤æ•™å­¦ç‚¹è¡¨ (`teaching_points`) çš„å­˜åœ¨å’Œç»“æ„
2. **ä¼˜å…ˆçº§2ï¼š** æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ•™å­¦ç‚¹å®ä½“ç±»å’Œ Mapper
3. **ä¼˜å…ˆçº§3ï¼š** æ ¹æ®å®é™…ç»“æ„è°ƒæ•´ SQL æŸ¥è¯¢è¯­å¥
4. **ä¼˜å…ˆçº§4ï¼š** å¯åŠ¨å®ç°å·¥ä½œ

---

**é™„æ³¨ï¼š** æœ¬åˆ†æå‡è®¾ç³»ç»Ÿå­˜åœ¨æ•™å­¦ç‚¹è¡¨å¹¶ä¸”ä¸æ‰“å¡è®°å½•é€šè¿‡ ID å…³è”ã€‚å¦‚æ•™å­¦ç‚¹è¡¨ä¸å­˜åœ¨ï¼Œéœ€è¦å…ˆåˆ›å»ºè¯¥è¡¨ã€‚

