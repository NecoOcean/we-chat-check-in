# 打卡小程序（版本 5）设计方案

## 一、整体架构与角色定位

**核心角色**：市级管理员（唯一）、县级管理员、教学点管理员（扫码参与者）

**设计原则**：管理端（市 / 县级）账号化管控，参与端（教学点）无登录扫码操作，实现 “管理精准化 + 参与轻量化”。

## 二、模块功能详细设计

### 1. 活动管理模块

#### （1）活动发起

- **功能概述**：市级、县级管理员通过账号登录后，可发起活动，填写**活动名称、开始时间（打卡开始）、结束时间（打卡截止）、活动说明**。
- **操作流程**：填写表单→提交后系统生成**活动唯一ID**和**打卡专属二维码**（含活动ID等隐藏信息）→管理员可下载二维码并分发至教学点。
- **功能类型**：基础功能

#### （2）活动详情查看

- **功能概述**：展示活动下**已参与教学点列表（名称、实到人数、提交时间）、参与教学点总数、累计参与人数**。
- **操作流程**：管理员进入 “活动列表”→点击某活动→查看详情页数据。
- **功能类型**：基础功能

#### （3）活动结束

- **功能概述**：市级、县级管理员可在活动详情页点击“结束”按钮，终止打卡活动。此时活动打卡二维码失效，无法继续扫码提交打卡信息。
- **操作流程**：管理员进入 “活动列表”→点击某活动→查看详情页数据→点击“结束”。
- **功能类型**：基础功能

### 2. 用户管理模块

#### （1）账号配置

- **功能概述**：市级管理员可配置县级账号，账号参考格式为 **“区域编号 + admin”**（例如 “PXadmin”），支持设置**初始密码 **。
- **操作流程**：市级管理员进入 “用户管理 - 添加管理员”→输入账号密码→保存后账号生效。
- **功能类型**：基础功能

#### （2）账号管理

- **功能概述**：对所有县级账号进行**修改（密码）、启用 / 禁用、删除（数据永久保留，仅隐藏） 操作**，操作日志永久留存。
- **操作流程**：管理员进入 “用户管理 ”→对目标账号执行对应操作→系统实时更新账号状态。
- **功能类型**：基础功能

### 3. 活动数据模块

#### 监控总看板

- **功能概述**：展示平台**总活动数、进行中活动数、累计参与教学点数、累计参与人数**，以卡片和图表形式可视化呈现，支持点击模块跳转至对应详情页。
- **操作流程**：管理员登录后首页即展示总看板，数据每 10 分钟自动刷新一次。
- **功能类型**：基础功能

### 4. 二维码管理模块

#### （1）活动评价二维码

- **功能概述**：活动结束后，发起方（市 / 县级管理员）可在活动详情页生成**评价专属二维码**，含活动 ID 和 “评价阶段” 标识，默认有效期 7 天（可自定义）。
- **操作流程**：活动结束→管理员点击 “生成评价二维码”→系统生成带有效期的二维码→可下载并分发。
- **功能类型**：基础功能

#### （2）二维码参与

- **功能概述**：教学点管理员扫描评价二维码后，系统校验其是否参与过该活动（未参与则提示 “无参与记录，无法评价”），验证通过后进入评价页。
- **操作流程**：扫码→系统校验→进入评价页→提交评价→提示 “评价成功”。
- **功能类型**：基础功能

#### （3）二维码状态管理

- **功能概述**：查看所有生成的二维码（打卡、评价）的**有效期、状态（正常 / 禁用）**，支持单个或批量禁用（防止二维码泄露后越权操作）。
- **操作流程**：管理员进入 “二维码管理 - 状态列表”→对目标二维码执行 “禁用” 操作→系统实时更新状态，禁用后二维码扫码提示 “已失效”。
- **功能类型**：基础功能

### 5. 打卡提交模块

#### （1）扫码参与

- **功能概述**：教学点管理员扫描活动打卡二维码后，直接进入 “教学点选择 + 人数提交” 页面，无需登录。
- **操作流程**：扫码→进入选择页面→完成操作→提交成功。
- **功能类型**：基础功能

#### （2）数据录入

- **功能概述**：下拉选择**所属教学点**，输入**实际到场人数**。
- **操作流程**：选择教学点→输入人数→点击 “提交”→系统提示 “提交成功”，数据实时同步至活动详情页。
- **功能类型**：基础功能

### 6. 活动评价模块

#### （1）活动评价

- **功能概述**：含**3-4 个选择题**（如 “活动满意度：满意 / 一般 / 不满意”“内容实用性：强 / 中 / 弱”）和**1 个文字建议框**（限 200 字），提交后数据仅反馈给发起活动的市 / 县级管理员。
- **操作流程**：扫码进入评价页→填写评价内容→点击 “提交”→提示 “评价成功”。
- **功能类型**：基础功能

#### （2）反馈机制

- **功能概述**：发起方在活动详情页可查看**评价汇总（如满意度分布饼图）和评价明细（各教学点的具体评价内容）**。
- **操作流程**：管理员进入活动详情页→点击 “评价管理”→查看汇总与明细数据。
- **功能类型**：基础功能

## 三、数据流转与权限隔离

### 1. 数据流转流程

![image-20251028143119009](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20251028143119009.png)

### 2. 权限隔离设计

| 角色         | 活动发起权限  | 账号管理权限 | 数据查看范围            | 二维码管理权限          |
| ------------ | ------------- | ------------ | ----------------------- | ----------------------- |
| 市级管理员   | 全市 / 指定县 | 所有账号     | 全量数据                | 所有活动的打卡 / 评价码 |
| 县级管理员   | 本县          | 无           | 本县数据                | 本县活动的打卡 / 评价码 |
| 教学点管理员 | 无            | 无           | 无（仅参与打卡 / 评价） | 无                      |

## 四、界面设计建议

- **管理端（市级）**：直接使用微信小程序实现后台管理功能。主界面直接显示“发起打卡、历史打卡、新增管理员”按钮板块，下方展示管理端（市级）当前进行中的活动数据饼状图展示基本数据。
- **管理端（县级）**：基本与管理端（市级）一致。点击新增管理员时提示无权限访问。展示本县管理端当前进行中的活动数据，基本包括参与教学点及其人数、总人数等。
- **参与端（教学点）**：极简操作界面，打卡页仅保留 “教学点选择下拉框 + 人数输入框 + 提交按钮”；评价页仅保留 “选择题 + 文字框 + 提交按钮”，步骤清晰无冗余。

## 五、测试与上线规划

1. **测试重点**：二维码有效性（不同阶段、不同活动的隔离）、数据提交实时性、权限隔离准确性、评价反馈完整性。
2. **上线步骤**：先选择 1 个县进行试点，验证流程顺畅性后，再逐步推广至全市，同步培训市 / 县级管理员的账号操作与二维码管理流程。
