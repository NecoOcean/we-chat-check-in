# 功能概述（基于打卡小程序 版本 5 设计方案）

## 一、总体目标与角色

- 核心目标：实现“管理精准化 + 参与轻量化”的活动打卡与评价平台。
- 角色与定位：
  - 市级管理员（唯一）：拥有全市范围的活动与账号管理权限。
  - 县级管理员：拥有本县范围的活动管理与数据查看权限，无账号管理权限。
  - 教学点管理员（参与端）：通过扫码完成打卡或评价，无需登录账号。

## 二、设计原则

- 管理端账号化管控：市/县级管理员统一账号登录、权限隔离。
- 参与端无登录：教学点管理员通过二维码进入页面，完成选择与提交。
- 二维码分阶段：打卡阶段与评价阶段二维码分离，分别可控有效期与状态。
- 数据实时：打卡与评价数据实时入库，看板与活动详情实时/准实时更新。
- 可审计：所有关键操作（账号、活动、二维码状态）留存审计日志。

## 三、模块与核心功能

### 1. 活动管理
- 活动发起：填写活动名称、开始/结束时间、说明；生成唯一活动ID与打卡二维码。
- 活动详情：展示参与教学点列表（名称、人数、提交时间）、参与总数、累计人数。
- 活动结束：终止活动，打卡二维码失效，后续无法提交打卡。

### 2. 用户管理（市级）
- 账号配置：市级管理员创建县级管理员账号（如“PXadmin”），设置初始密码。
- 账号管理：修改密码、启用/禁用、删除（软删除隐藏数据）；操作日志留存。

### 3. 活动数据看板
- 总览卡片与图表：总活动数、进行中、累计参与教学点数、累计参与人数。
- 自动刷新：默认每10分钟刷新一次；支持跳转关联详情页面。

### 4. 二维码管理
- 评价二维码：活动结束后生成评价专属二维码，默认有效期7天（可配置）。
- 二维码参与：扫码校验是否参与过活动（未参与不可评价），提交评价并提示成功。
- 状态管理：查看所有二维码有效期与状态，支持禁用；禁用后扫码提示失效。

### 5. 打卡提交（参与端）
- 扫码参与：直接进入“教学点选择 + 人数输入”页面，无需登录。
- 数据录入：选择教学点、输入人数、提交成功；活动详情实时同步。

### 6. 活动评价（参与端）
- 题型设置：3-4个选择题（满意度、实用性等）+ 1个文字建议（≤200字）。
- 反馈展示：发起方在活动详情页查看评价汇总（饼图等）与明细（逐教学点）。

## 四、数据流转与权限隔离

- 数据流转：二维码扫描 → 前端校验/引导 → 服务端校验 → 数据入库 → 看板/详情展示。
- 权限隔离：
  - 市级管理员：全量活动与数据、所有二维码与账号管理。
  - 县级管理员：仅限本县活动与数据、二维码管理（本县）。
  - 教学点管理员：仅打卡/评价参与，无数据管理权限。

## 五、非功能性要求

- 安全：二维码签名、防篡改；操作审计；按角色与县域严格授权。
- 可靠：打卡与评价接口幂等、防重复提交；高峰期限流与排队提示。
- 性能：看板聚合查询优化、核心字段索引；缓存热点统计。
- 可维护：模块化服务、统一错误码与日志；配置化有效期与规则。

## 六、术语说明

- 打卡二维码：用于活动进行阶段的参与扫码提交出勤人数。
- 评价二维码：活动结束后用于参与评价的扫码入口。
- 教学点：参与主体，进行打卡与评价的数据对象，归属县域。