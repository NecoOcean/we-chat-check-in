# æ ¸å¿ƒæ¨¡å—æµ‹è¯•ç”¨ä¾‹

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.1.0  
**åˆ›å»ºæ—¥æœŸï¼š** 2024-11-01  
**æ›´æ–°æ—¥æœŸï¼š** 2024-11-01  
**åŠŸèƒ½è¦†ç›–ï¼š** æ´»åŠ¨ç®¡ç†ã€äºŒç»´ç ç®¡ç†ã€æ‰“å¡å‚ä¸ã€æ´»åŠ¨è¯„ä»·  
**æµ‹è¯•æ•°æ®è„šæœ¬ï¼š** `sql/test_county_statistics_data.sql`  

---

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›å¾®ä¿¡æ‰“å¡å°ç¨‹åºç³»ç»Ÿå››ä¸ªæ ¸å¿ƒæ¨¡å—çš„å®Œæ•´æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬ï¼š

1. **æ´»åŠ¨ç®¡ç†æ¨¡å—** - åˆ›å»ºæ´»åŠ¨ã€æŸ¥è¯¢æ´»åŠ¨ã€ç»“æŸæ´»åŠ¨ã€å¿åŸŸç»Ÿè®¡
2. **äºŒç»´ç ç®¡ç†æ¨¡å—** - ç”ŸæˆäºŒç»´ç ã€æŸ¥è¯¢äºŒç»´ç ã€ç¦ç”¨äºŒç»´ç ã€éªŒè¯äºŒç»´ç 
3. **æ‰“å¡å‚ä¸æ¨¡å—** - æäº¤æ‰“å¡ã€æŸ¥è¯¢æ‰“å¡ã€æ‰“å¡ç»Ÿè®¡ã€å¹‚ç­‰æ€§éªŒè¯
4. **æ´»åŠ¨è¯„ä»·æ¨¡å—** - æäº¤è¯„ä»·ã€æŸ¥è¯¢è¯„ä»·ã€è¯„ä»·ç»Ÿè®¡ã€æƒé™éš”ç¦»

---

## ğŸ¯ æµ‹è¯•ç¯å¢ƒå‡†å¤‡

### å‰ç½®æ¡ä»¶

1. **åº”ç”¨å¯åŠ¨**
   ```bash
   cd backend
   mvn spring-boot:run
   ```

2. **æµ‹è¯•æ•°æ®å¯¼å…¥**
   ```bash
   mysql -u root -p wechat_checkin < sql/test_county_statistics_data.sql
   ```

3. **è·å–ç®¡ç†å‘˜token**
   ```bash
   # å¸‚çº§ç®¡ç†å‘˜ç™»å½•
   curl -X POST "http://localhost:8080/api/auth/login" \
     -H "Content-Type: application/json" \
     -d '{"username":"admin","password":"admin123"}'
   
   # è®°å½•è¿”å›çš„token
   ```

### æµ‹è¯•è´¦å·

| è´¦å· | å¯†ç  | è§’è‰² | å¿åŸŸ | ç”¨é€” |
|------|------|------|------|------|
| admin | admin123 | å¸‚çº§ç®¡ç†å‘˜ | æ—  | å…¨ç³»ç»Ÿæµ‹è¯• |
| chaoyang_admin | admin123 | å¿çº§ç®¡ç†å‘˜ | æœé˜³åŒº(001) | æƒé™éš”ç¦»æµ‹è¯• |
| fengtai_admin | admin123 | å¿çº§ç®¡ç†å‘˜ | ä¸°å°åŒº(002) | æƒé™éš”ç¦»æµ‹è¯• |
| dongcheng_admin | admin123 | å¿çº§ç®¡ç†å‘˜ | ä¸œåŸåŒº(003) | æƒé™éš”ç¦»æµ‹è¯• |

---

# ç¬¬ä¸€éƒ¨åˆ†ï¼šæ´»åŠ¨ç®¡ç†æ¨¡å—æµ‹è¯•ç”¨ä¾‹

## æ¨¡å—æ¦‚è¿°

æ´»åŠ¨ç®¡ç†æ¨¡å—è´Ÿè´£æ´»åŠ¨çš„åˆ›å»ºã€æŸ¥è¯¢ã€ç»“æŸå’Œç»Ÿè®¡åŠŸèƒ½ã€‚

### æ ¸å¿ƒAPI

| æ–¹æ³• | è·¯å¾„ | æƒé™ | åŠŸèƒ½ |
|------|------|------|------|
| POST | `/api/activities` | å¸‚/å¿çº§ | åˆ›å»ºæ´»åŠ¨ |
| GET | `/api/activities` | å¸‚/å¿çº§ | æŸ¥è¯¢æ´»åŠ¨åˆ—è¡¨ |
| GET | `/api/activities/{id}` | å¸‚/å¿çº§ | æŸ¥è¯¢æ´»åŠ¨è¯¦æƒ… |
| POST | `/api/activities/{id}/finish` | å¸‚/å¿çº§ | ç»“æŸæ´»åŠ¨ |
| GET | `/api/activities/{id}/county-statistics` | å¸‚/å¿çº§ | å¿åŸŸæ‰“å¡ç»Ÿè®¡(æ–°å¢) |

---

## æµ‹è¯•ç”¨ä¾‹ 1.1ï¼šå¸‚çº§ç®¡ç†å‘˜åˆ›å»ºæ´»åŠ¨

**ç”¨ä¾‹IDï¼š** ACTIVITY-001  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** åˆ›å»ºæ´»åŠ¨ã€æ‰“å¡äºŒç»´ç è‡ªåŠ¨ç”Ÿæˆ

**å‰ç½®æ¡ä»¶ï¼š**
- åº”ç”¨å·²å¯åŠ¨
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•ï¼Œè·å¾—æœ‰æ•ˆtoken
- æ•°æ®åº“ä¸­å­˜åœ¨æ´»åŠ¨æ‰€éœ€çš„åŸºç¡€æ•°æ®

**æµ‹è¯•æ­¥éª¤ï¼š**

1. ç™»å½•è·å–token
```bash
curl -X POST "http://localhost:8080/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'

# è®°å½•è¿”å›çš„ token
CITY_ADMIN_TOKEN="<è¿”å›çš„token>"
```

2. åˆ›å»ºæ´»åŠ¨
```bash
curl -X POST "http://localhost:8080/api/activities" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "2024å¹´å†¬å­£æ•™å­¦æ´»åŠ¨",
    "description": "å…¨å¸‚å†¬å­£æ•™å­¦æ€»ç»“å’Œè¯„ä¼°",
    "startTime": "2024-12-01T08:00:00",
    "endTime": "2024-12-31T17:00:00"
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›æ–°åˆ›å»ºçš„æ´»åŠ¨ID
- âœ… æ´»åŠ¨çŠ¶æ€ä¸º `ONGOING`
- âœ… è‡ªåŠ¨ç”Ÿæˆäº†æ‰“å¡äºŒç»´ç 
- âœ… äºŒç»´ç æ•°é‡ä¸º2ï¼ˆæ‰“å¡+è¯„ä»·ï¼‰

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": 3,
  "timestamp": 1698765432000
}
```

**éªŒè¯æ­¥éª¤ï¼š**
```sql
-- éªŒè¯æ´»åŠ¨åˆ›å»º
SELECT id, name, status, scope_county_code FROM activities WHERE name = '2024å¹´å†¬å­£æ•™å­¦æ´»åŠ¨';

-- éªŒè¯äºŒç»´ç ç”Ÿæˆ
SELECT id, activity_id, type, status FROM qrcodes WHERE activity_id = 3 ORDER BY type;
```

---

## æµ‹è¯•ç”¨ä¾‹ 1.2ï¼šå¿çº§ç®¡ç†å‘˜åˆ›å»ºæ´»åŠ¨ï¼ˆæƒé™èŒƒå›´ï¼‰

**ç”¨ä¾‹IDï¼š** ACTIVITY-002  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** æƒé™éš”ç¦»ã€å¿çº§æ´»åŠ¨

**å‰ç½®æ¡ä»¶ï¼š**
- å¿çº§ç®¡ç†å‘˜ï¼ˆæœé˜³åŒºï¼‰å·²ç™»å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

1. å¿çº§ç®¡ç†å‘˜ç™»å½•
```bash
curl -X POST "http://localhost:8080/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "chaoyang_admin",
    "password": "admin123"
  }'

COUNTY_ADMIN_TOKEN="<è¿”å›çš„token>"
```

2. åˆ›å»ºå¿çº§æ´»åŠ¨
```bash
curl -X POST "http://localhost:8080/api/activities" \
  -H "Authorization: Bearer ${COUNTY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æœé˜³åŒº2024å¹´ç§‹å­£æ•™å­¦æ´»åŠ¨",
    "description": "æœé˜³åŒºçš„ä¸“å±æ´»åŠ¨",
    "startTime": "2024-11-15T08:00:00",
    "endTime": "2024-11-30T17:00:00"
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200ï¼Œæ´»åŠ¨åˆ›å»ºæˆåŠŸ
- âœ… æ´»åŠ¨çš„ `scope_county_code` ä¸º `001`ï¼ˆæœé˜³åŒºï¼‰
- âœ… æ‰“å¡äºŒç»´ç è‡ªåŠ¨ç”Ÿæˆ

**éªŒè¯æ­¥éª¤ï¼š**
```sql
-- éªŒè¯å¿çº§æ´»åŠ¨çš„å¿åŸŸèŒƒå›´
SELECT id, name, scope_county_code, status FROM activities 
WHERE name = 'æœé˜³åŒº2024å¹´ç§‹å­£æ•™å­¦æ´»åŠ¨';
```

---

## æµ‹è¯•ç”¨ä¾‹ 1.3ï¼šæŸ¥è¯¢æ´»åŠ¨åˆ—è¡¨ï¼ˆå¸‚çº§ç®¡ç†å‘˜ï¼‰

**ç”¨ä¾‹IDï¼š** ACTIVITY-003  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** åˆ†é¡µæŸ¥è¯¢ã€æƒé™éš”ç¦»

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- æ•°æ®åº“ä¸­è‡³å°‘æœ‰3ä¸ªæ´»åŠ¨

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
# æŸ¥è¯¢æ‰€æœ‰æ´»åŠ¨
curl -X GET "http://localhost:8080/api/activities?current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"

# æŸ¥è¯¢è¿›è¡Œä¸­çš„æ´»åŠ¨
curl -X GET "http://localhost:8080/api/activities?current=1&size=10&status=ONGOING" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"

# æŒ‰å¿åŸŸè¿‡æ»¤
curl -X GET "http://localhost:8080/api/activities?current=1&size=10&scopeCountyCode=001" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›åˆ†é¡µæ•°æ®
- âœ… æ¯æ¡æ´»åŠ¨åŒ…å«åŸºæœ¬ä¿¡æ¯ï¼ˆIDã€åç§°ã€çŠ¶æ€ã€åˆ›å»ºæ—¶é—´ç­‰ï¼‰
- âœ… å¸‚çº§ç®¡ç†å‘˜èƒ½çœ‹åˆ°æ‰€æœ‰æ´»åŠ¨

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "name": "2024å¹´ç§‹å­£æ•™å­¦æ´»åŠ¨",
        "status": "ONGOING",
        "startTime": "2024-10-30T08:00:00",
        "endTime": "2024-12-31T17:00:00",
        "scopeCountyCode": "001"
      }
    ],
    "total": 3,
    "current": 1,
    "size": 10
  }
}
```

---

## æµ‹è¯•ç”¨ä¾‹ 1.4ï¼šæŸ¥è¯¢æ´»åŠ¨åˆ—è¡¨ï¼ˆå¿çº§ç®¡ç†å‘˜æƒé™ï¼‰

**ç”¨ä¾‹IDï¼š** ACTIVITY-004  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** æ•°æ®æƒé™éš”ç¦»

**å‰ç½®æ¡ä»¶ï¼š**
- å¿çº§ç®¡ç†å‘˜ï¼ˆæœé˜³åŒºï¼‰å·²ç™»å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
# å¿çº§ç®¡ç†å‘˜æŸ¥è¯¢æ´»åŠ¨åˆ—è¡¨
curl -X GET "http://localhost:8080/api/activities?current=1&size=10" \
  -H "Authorization: Bearer ${COUNTY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… ä»…è¿”å›æœé˜³åŒºçš„æ´»åŠ¨æˆ–å…¨å¸‚æ´»åŠ¨
- âœ… ä¸è¿”å›å…¶ä»–å¿åŒºçš„ä¸“å±æ´»åŠ¨

**éªŒè¯è¦ç‚¹ï¼š**
- âœ… è¿”å›çš„æ‰€æœ‰æ´»åŠ¨çš„ `scopeCountyCode` ä¸º nullï¼ˆå…¨å¸‚ï¼‰æˆ– `001`ï¼ˆæœé˜³åŒºï¼‰
- âœ… ä¸åŒ…å«ä¸°å°åŒº(002)ã€ä¸œåŸåŒº(003)çš„ä¸“å±æ´»åŠ¨

---

## æµ‹è¯•ç”¨ä¾‹ 1.5ï¼šæŸ¥è¯¢æ´»åŠ¨è¯¦æƒ…ï¼ˆåŒ…å«æ‰“å¡ç»Ÿè®¡ï¼‰

**ç”¨ä¾‹IDï¼š** ACTIVITY-005  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** æ´»åŠ¨è¯¦æƒ…ã€æ‰“å¡ç»Ÿè®¡ã€äºŒç»´ç ä¿¡æ¯

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- æ´»åŠ¨IDä¸º1ï¼ˆä»æµ‹è¯•æ•°æ®ï¼‰
- æ´»åŠ¨å·²æœ‰æ‰“å¡è®°å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/activities/1" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›æ´»åŠ¨åŸºæœ¬ä¿¡æ¯
- âœ… è¿”å›å‚ä¸æ•™å­¦ç‚¹æ•°ï¼ˆparticipatedCountï¼‰
- âœ… è¿”å›æ€»å‚ä¸äººæ•°ï¼ˆtotalAttendeesï¼‰
- âœ… è¿”å›è¯„ä»·æ•°é‡ï¼ˆevaluationCountï¼‰
- âœ… è¿”å›äºŒç»´ç åˆ—è¡¨ï¼ˆæ‰“å¡+è¯„ä»·ï¼‰

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "activity": {
      "id": 1,
      "name": "2024å¹´ç§‹å­£æ•™å­¦æ´»åŠ¨",
      "status": "ONGOING",
      "startTime": "2024-10-30T08:00:00",
      "endTime": "2024-12-31T17:00:00"
    },
    "participatedCount": 15,
    "totalAttendees": 420,
    "evaluationCount": 15,
    "qrCodes": [
      {
        "id": 1,
        "type": "checkin",
        "status": "enabled",
        "expireTime": "2024-12-06T23:59:59"
      },
      {
        "id": 2,
        "type": "evaluation",
        "status": "enabled",
        "expireTime": "2024-12-06T23:59:59"
      }
    ]
  }
}
```

---

## æµ‹è¯•ç”¨ä¾‹ 1.6ï¼šç»“æŸæ´»åŠ¨ï¼ˆè‡ªåŠ¨ç»“æŸï¼‰

**ç”¨ä¾‹IDï¼š** ACTIVITY-006  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** æ´»åŠ¨ç»“æŸã€æ‰“å¡äºŒç»´ç ç¦ç”¨ã€è¯„ä»·äºŒç»´ç ä¿ç•™

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- æ´»åŠ¨IDä¸º1ï¼ŒçŠ¶æ€ä¸º ONGOING

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
# ç»“æŸæ´»åŠ¨
curl -X POST "http://localhost:8080/api/activities/1/finish" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… æ´»åŠ¨çŠ¶æ€å˜ä¸º FINISHED
- âœ… æ‰“å¡äºŒç»´ç è¢«ç¦ç”¨
- âœ… è¯„ä»·äºŒç»´ç ä¿æŒå¯ç”¨

**éªŒè¯æ­¥éª¤ï¼š**
```sql
-- éªŒè¯æ´»åŠ¨çŠ¶æ€
SELECT id, status, ended_time FROM activities WHERE id = 1;

-- éªŒè¯äºŒç»´ç çŠ¶æ€
SELECT id, type, status, disabled_time FROM qrcodes WHERE activity_id = 1;
```

**éªŒè¯è¦ç‚¹ï¼š**
- âœ… æ‰“å¡äºŒç»´ç (checkin) çŠ¶æ€ä¸º disabled
- âœ… è¯„ä»·äºŒç»´ç (evaluation) çŠ¶æ€ä¿æŒ enabled

---

## æµ‹è¯•ç”¨ä¾‹ 1.7ï¼šå¿åŸŸæ‰“å¡ç»Ÿè®¡ï¼ˆå¸‚çº§ç®¡ç†å‘˜ä¸“ç”¨ï¼‰

**ç”¨ä¾‹IDï¼š** ACTIVITY-007  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** å¿åŸŸç»Ÿè®¡ã€æ‰“å¡è¯¦æƒ…ã€æƒé™éš”ç¦»

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- æ´»åŠ¨IDä¸º1ï¼Œæœ‰è·¨å¿åŸŸçš„æ‰“å¡è®°å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/activities/1/county-statistics" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… countyStatistics åŒ…å«3ä¸ªå¿åŸŸçš„ç»Ÿè®¡
- âœ… æ¯ä¸ªå¿åŸŸåŒ…å«ï¼š
  - countyCode / countyName
  - participatingPointsï¼ˆæ•™å­¦ç‚¹æ•°ï¼‰
  - totalAttendeesï¼ˆç´¯è®¡äººæ•°ï¼‰
  - totalCheckinsï¼ˆæ‰“å¡æ¬¡æ•°ï¼‰
- âœ… checkinDetails åŒ…å«å…¨éƒ¨15æ¡æ‰“å¡è®°å½•
- âœ… æŒ‰å¿åŸŸå’Œæ—¶é—´æ’åº

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "activity": { ... },
    "participatedCount": 15,
    "totalAttendees": 420,
    "evaluationCount": 15,
    "countyStatistics": [
      {
        "countyCode": "001",
        "countyName": "æœé˜³åŒº",
        "participatingPoints": 5,
        "totalAttendees": 150,
        "totalCheckins": 5
      },
      {
        "countyCode": "002",
        "countyName": "ä¸°å°åŒº",
        "participatingPoints": 5,
        "totalAttendees": 145,
        "totalCheckins": 5
      },
      {
        "countyCode": "003",
        "countyName": "ä¸œåŸåŒº",
        "participatingPoints": 5,
        "totalAttendees": 125,
        "totalCheckins": 5
      }
    ],
    "checkinDetails": [
      {
        "id": 1,
        "teachingPointId": 1,
        "teachingPointName": "æœé˜³åŒºç¬¬ä¸€å°å­¦",
        "countyCode": "001",
        "countyName": "æœé˜³åŒº",
        "attendeeCount": 30,
        "submittedTime": "2024-10-30T14:30:00"
      }
    ]
  }
}
```

---

## æµ‹è¯•ç”¨ä¾‹ 1.8ï¼šå¿çº§ç®¡ç†å‘˜æŸ¥çœ‹å¿åŸŸç»Ÿè®¡ï¼ˆæƒé™éš”ç¦»ï¼‰

**ç”¨ä¾‹IDï¼š** ACTIVITY-008  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** æƒé™éš”ç¦»ã€åªèƒ½æŸ¥çœ‹æœ¬å¿æ‰“å¡è¯¦æƒ…

**å‰ç½®æ¡ä»¶ï¼š**
- å¿çº§ç®¡ç†å‘˜ï¼ˆæœé˜³åŒºï¼‰å·²ç™»å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/activities/1/county-statistics" \
  -H "Authorization: Bearer ${COUNTY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… countyStatistics ä¸º nullï¼ˆæƒé™éš”ç¦»ï¼‰
- âœ… checkinDetails ä»…åŒ…å«æœé˜³åŒºçš„5æ¡è®°å½•
- âœ… ä¸åŒ…å«å…¶ä»–å¿åŒºçš„æ•°æ®

**éªŒè¯è¦ç‚¹ï¼š**
- âœ… countyStatistics === null
- âœ… checkinDetails.length === 5
- âœ… æ‰€æœ‰checkinDetailsçš„countyCode === "001"

---

## æµ‹è¯•ç”¨ä¾‹ 1.9ï¼šåˆ›å»ºæ´»åŠ¨å‚æ•°éªŒè¯

**ç”¨ä¾‹IDï¼š** ACTIVITY-009  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** å‚æ•°æ ¡éªŒã€é”™è¯¯å¤„ç†

**æµ‹è¯•åœºæ™¯ï¼š**

### åœºæ™¯1ï¼šç¼ºå°‘å¿…å¡«å­—æ®µï¼ˆæ´»åŠ¨åç§°ï¼‰
```bash
curl -X POST "http://localhost:8080/api/activities" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "description": "ç¼ºå°‘åç§°çš„æ´»åŠ¨",
    "startTime": "2024-12-01T08:00:00",
    "endTime": "2024-12-31T17:00:00"
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400 æˆ– 422ï¼ˆå‚æ•°æ ¡éªŒå¤±è´¥ï¼‰
- âœ… è¿”å›é”™è¯¯æ¶ˆæ¯æŒ‡ç¤ºç¼ºå°‘æ´»åŠ¨åç§°

### åœºæ™¯2ï¼šç»“æŸæ—¶é—´æ—©äºå¼€å§‹æ—¶é—´
```bash
curl -X POST "http://localhost:8080/api/activities" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æ—¶é—´é”™è¯¯çš„æ´»åŠ¨",
    "description": "ç»“æŸæ—¶é—´æ—©äºå¼€å§‹æ—¶é—´",
    "startTime": "2024-12-31T17:00:00",
    "endTime": "2024-12-01T08:00:00"
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… è¿”å›é”™è¯¯æ¶ˆæ¯æŒ‡ç¤ºæ—¶é—´é…ç½®ä¸åˆæ³•

### åœºæ™¯3ï¼šè¿‡å»çš„æ—¶é—´
```bash
curl -X POST "http://localhost:8080/api/activities" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "è¿‡æœŸçš„æ´»åŠ¨",
    "description": "å¼€å§‹æ—¶é—´åœ¨è¿‡å»",
    "startTime": "2024-01-01T08:00:00",
    "endTime": "2024-01-31T17:00:00"
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… è¿”å›é”™è¯¯æ¶ˆæ¯æŒ‡ç¤ºæ´»åŠ¨æ—¶é—´ä¸åˆæ³•

---

## æµ‹è¯•ç”¨ä¾‹ 1.10ï¼šæ´»åŠ¨ä¸å­˜åœ¨é”™è¯¯å¤„ç†

**ç”¨ä¾‹IDï¼š** ACTIVITY-010  
**ä¼˜å…ˆçº§ï¼š** â­â­â­ (ä¸­)  
**å…³é”®è¯ï¼š** é”™è¯¯å¤„ç†ã€404

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
# æŸ¥è¯¢ä¸å­˜åœ¨çš„æ´»åŠ¨
curl -X GET "http://localhost:8080/api/activities/99999" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 404 æˆ–è¿”å›é”™è¯¯ç 
- âœ… è¿”å›é”™è¯¯æ¶ˆæ¯ï¼š"æ´»åŠ¨ä¸å­˜åœ¨"

---

---

# ç¬¬äºŒéƒ¨åˆ†ï¼šäºŒç»´ç ç®¡ç†æ¨¡å—æµ‹è¯•ç”¨ä¾‹

## æ¨¡å—æ¦‚è¿°

äºŒç»´ç ç®¡ç†æ¨¡å—è´Ÿè´£ç”Ÿæˆã€æŸ¥è¯¢ã€ç¦ç”¨å’ŒéªŒè¯äºŒç»´ç ã€‚

### æ ¸å¿ƒAPI

| æ–¹æ³• | è·¯å¾„ | æƒé™ | åŠŸèƒ½ |
|------|------|------|------|
| POST | `/api/activities/{id}/qrcodes` | å¸‚/å¿çº§ | ç”ŸæˆäºŒç»´ç  |
| GET | `/api/qrcodes` | å¸‚/å¿çº§ | æŸ¥è¯¢äºŒç»´ç åˆ—è¡¨ |
| GET | `/api/qrcodes/{id}` | å¸‚/å¿çº§ | æŸ¥è¯¢äºŒç»´ç è¯¦æƒ… |
| PATCH | `/api/qrcodes/{id}/disable` | å¸‚/å¿çº§ | ç¦ç”¨äºŒç»´ç  |
| GET | `/api/qrcodes/verify?token=...` | æ— éœ€è®¤è¯ | éªŒè¯äºŒç»´ç  |

---

## æµ‹è¯•ç”¨ä¾‹ 2.1ï¼šç”Ÿæˆæ‰“å¡äºŒç»´ç 

**ç”¨ä¾‹IDï¼š** QRCODE-001  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** ç”ŸæˆäºŒç»´ç ã€æ‰“å¡ç±»å‹

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- æ´»åŠ¨IDä¸º1å­˜åœ¨

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X POST "http://localhost:8080/api/activities/1/qrcodes" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "checkin",
    "expireTime": "2024-12-10T23:59:59"
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›äºŒç»´ç ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
  - idï¼šäºŒç»´ç ID
  - typeï¼šcheckin
  - tokenï¼šJWTä»¤ç‰Œ
  - expireTimeï¼šè¿‡æœŸæ—¶é—´
  - statusï¼šenabled
  - qrCodeImageï¼šBase64ç¼–ç çš„äºŒç»´ç å›¾ç‰‡
  - urlï¼šäºŒç»´ç é“¾æ¥

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "äºŒç»´ç ç”ŸæˆæˆåŠŸ",
  "data": {
    "id": 3,
    "activityId": 1,
    "type": "checkin",
    "token": "eyJhbGciOiJIUzUxMiJ9...",
    "expireTime": "2024-12-10T23:59:59",
    "status": "enabled",
    "createdTime": "2024-11-01T10:00:00",
    "qrCodeImage": "data:image/png;base64,iVBORw0KG...",
    "url": "http://localhost:8080/api/qrcodes/verify?token=eyJhbGciOiJIUzUxMiJ9..."
  }
}
```

---

## æµ‹è¯•ç”¨ä¾‹ 2.2ï¼šç”Ÿæˆè¯„ä»·äºŒç»´ç 

**ç”¨ä¾‹IDï¼š** QRCODE-002  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** ç”ŸæˆäºŒç»´ç ã€è¯„ä»·ç±»å‹

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- æ´»åŠ¨IDä¸º1å­˜åœ¨

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X POST "http://localhost:8080/api/activities/1/qrcodes" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "evaluation",
    "expireTime": "2024-12-10T23:59:59"
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›äºŒç»´ç ä¿¡æ¯
- âœ… type ä¸º evaluation
- âœ… äºŒç»´ç å›¾ç‰‡æ­£ç¡®ç”Ÿæˆ

---

## æµ‹è¯•ç”¨ä¾‹ 2.3ï¼šæŸ¥è¯¢äºŒç»´ç åˆ—è¡¨

**ç”¨ä¾‹IDï¼š** QRCODE-003  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** åˆ†é¡µæŸ¥è¯¢ã€æŒ‰ç±»å‹è¿‡æ»¤

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
# æŸ¥è¯¢æ‰€æœ‰äºŒç»´ç 
curl -X GET "http://localhost:8080/api/qrcodes?current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"

# æŒ‰æ´»åŠ¨è¿‡æ»¤
curl -X GET "http://localhost:8080/api/qrcodes?activityId=1&current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"

# æŒ‰ç±»å‹è¿‡æ»¤
curl -X GET "http://localhost:8080/api/qrcodes?type=checkin&current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"

# æŒ‰çŠ¶æ€è¿‡æ»¤
curl -X GET "http://localhost:8080/api/qrcodes?status=enabled&current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›åˆ†é¡µæ•°æ®
- âœ… æ¯æ¡è®°å½•åŒ…å«äºŒç»´ç çš„å®Œæ•´ä¿¡æ¯

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "activityId": 1,
        "type": "checkin",
        "status": "enabled",
        "expireTime": "2024-12-06T23:59:59",
        "createdTime": "2024-10-30T00:00:00"
      },
      {
        "id": 2,
        "activityId": 1,
        "type": "evaluation",
        "status": "enabled",
        "expireTime": "2024-12-06T23:59:59",
        "createdTime": "2024-10-30T00:00:00"
      }
    ],
    "total": 2,
    "current": 1,
    "size": 10
  }
}
```

---

## æµ‹è¯•ç”¨ä¾‹ 2.4ï¼šæŸ¥è¯¢äºŒç»´ç è¯¦æƒ…

**ç”¨ä¾‹IDï¼š** QRCODE-004  
**ä¼˜å…ˆçº§ï¼š** â­â­â­ (ä¸­)  
**å…³é”®è¯ï¼š** æŸ¥è¯¢è¯¦æƒ…

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/qrcodes/1" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›äºŒç»´ç è¯¦ç»†ä¿¡æ¯
- âœ… åŒ…å«Base64ç¼–ç çš„äºŒç»´ç å›¾ç‰‡

---

## æµ‹è¯•ç”¨ä¾‹ 2.5ï¼šç¦ç”¨å•ä¸ªäºŒç»´ç 

**ç”¨ä¾‹IDï¼š** QRCODE-005  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** ç¦ç”¨äºŒç»´ç 

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- äºŒç»´ç IDä¸º1å­˜åœ¨ï¼ŒçŠ¶æ€ä¸º enabled

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X PATCH "http://localhost:8080/api/qrcodes/1/disable" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›æˆåŠŸæ¶ˆæ¯ï¼š"äºŒç»´ç å·²ç¦ç”¨"

**éªŒè¯æ­¥éª¤ï¼š**
```sql
-- éªŒè¯äºŒç»´ç çŠ¶æ€
SELECT id, status, disabled_time FROM qrcodes WHERE id = 1;
```

**éªŒè¯è¦ç‚¹ï¼š**
- âœ… äºŒç»´ç çŠ¶æ€å˜ä¸º disabled
- âœ… disabled_time è¢«è®¾ç½®

---

## æµ‹è¯•ç”¨ä¾‹ 2.6ï¼šéªŒè¯æœ‰æ•ˆçš„äºŒç»´ç 

**ç”¨ä¾‹IDï¼š** QRCODE-006  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** éªŒè¯äºŒç»´ç ã€æ— éœ€è®¤è¯

**å‰ç½®æ¡ä»¶ï¼š**
- æ´»åŠ¨IDä¸º1å­˜åœ¨
- æ‰“å¡äºŒç»´ç IDä¸º1ï¼ŒçŠ¶æ€ä¸º enabledï¼Œæœªè¿‡æœŸ

**æµ‹è¯•æ­¥éª¤ï¼š**

1. è·å–äºŒç»´ç token
```sql
SELECT token FROM qrcodes WHERE id = 1 AND type = 'checkin';
```

2. éªŒè¯äºŒç»´ç 
```bash
curl -X GET "http://localhost:8080/api/qrcodes/verify?token=<token>" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… valid = true
- âœ… è¿”å›äºŒç»´ç è¯¦æƒ…ï¼š
  - qrcodeId
  - activityId
  - type
  - expireTime

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "valid": true,
    "qrcodeId": 1,
    "activityId": 1,
    "type": "checkin",
    "expireTime": "2024-12-06T23:59:59",
    "reason": null
  }
}
```

---

## æµ‹è¯•ç”¨ä¾‹ 2.7ï¼šéªŒè¯å·²ç¦ç”¨çš„äºŒç»´ç 

**ç”¨ä¾‹IDï¼š** QRCODE-007  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** é”™è¯¯å¤„ç†ã€äºŒç»´ç å·²ç¦ç”¨

**å‰ç½®æ¡ä»¶ï¼š**
- äºŒç»´ç å·²è¢«ç¦ç”¨

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/qrcodes/verify?token=<ç¦ç”¨äºŒç»´ç çš„token>" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… valid = false
- âœ… reason = "äºŒç»´ç å·²è¢«ç¦ç”¨"

---

## æµ‹è¯•ç”¨ä¾‹ 2.8ï¼šéªŒè¯è¿‡æœŸçš„äºŒç»´ç 

**ç”¨ä¾‹IDï¼š** QRCODE-008  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** è¿‡æœŸéªŒè¯

**å‰ç½®æ¡ä»¶ï¼š**
- å·²ç”Ÿæˆä¸€ä¸ªè¿‡æœŸçš„äºŒç»´ç 

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/qrcodes/verify?token=<è¿‡æœŸäºŒç»´ç çš„token>" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… valid = false
- âœ… reason = "äºŒç»´ç å·²è¿‡æœŸ"

---

## æµ‹è¯•ç”¨ä¾‹ 2.9ï¼šéªŒè¯æ— æ•ˆçš„token

**ç”¨ä¾‹IDï¼š** QRCODE-009  
**ä¼˜å…ˆçº§ï¼š** â­â­â­ (ä¸­)  
**å…³é”®è¯ï¼š** é”™è¯¯å¤„ç†ã€æ— æ•ˆtoken

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/qrcodes/verify?token=invalid_token_12345" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… valid = false
- âœ… reason = "äºŒç»´ç ä»¤ç‰Œæ— æ•ˆ"

---

## æµ‹è¯•ç”¨ä¾‹ 2.10ï¼šç”ŸæˆäºŒç»´ç å‚æ•°æ ¡éªŒ

**ç”¨ä¾‹IDï¼š** QRCODE-010  
**ä¼˜å…ˆçº§ï¼š** â­â­â­ (ä¸­)  
**å…³é”®è¯ï¼š** å‚æ•°éªŒè¯

### åœºæ™¯1ï¼šç¼ºå°‘ç±»å‹
```bash
curl -X POST "http://localhost:8080/api/activities/1/qrcodes" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "expireTime": "2024-12-10T23:59:59"
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… è¿”å›å‚æ•°æ ¡éªŒé”™è¯¯

### åœºæ™¯2ï¼šæ— æ•ˆçš„ç±»å‹
```bash
curl -X POST "http://localhost:8080/api/activities/1/qrcodes" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "invalid_type",
    "expireTime": "2024-12-10T23:59:59"
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… è¿”å›é”™è¯¯ä¿¡æ¯ï¼š"æ— æ•ˆçš„äºŒç»´ç ç±»å‹"

---

---

# ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ‰“å¡å‚ä¸æ¨¡å—æµ‹è¯•ç”¨ä¾‹

## æ¨¡å—æ¦‚è¿°

æ‰“å¡å‚ä¸æ¨¡å—è´Ÿè´£å¤„ç†æ•™å­¦ç‚¹çš„æ‰“å¡æäº¤ã€æ•°æ®æŸ¥è¯¢å’Œç»Ÿè®¡åŠŸèƒ½ã€‚

### æ ¸å¿ƒAPI

| æ–¹æ³• | è·¯å¾„ | æƒé™ | åŠŸèƒ½ |
|------|------|------|------|
| POST | `/api/checkins/checkin` | æ— éœ€è®¤è¯ | æäº¤æ‰“å¡ |
| GET | `/api/checkins` | å¸‚/å¿çº§ | æŸ¥è¯¢æ‰“å¡è®°å½• |
| GET | `/api/checkins/statistics/{activityId}` | å¸‚/å¿çº§ | æŸ¥è¯¢æ‰“å¡ç»Ÿè®¡ |

---

## æµ‹è¯•ç”¨ä¾‹ 3.1ï¼šæäº¤æœ‰æ•ˆæ‰“å¡

**ç”¨ä¾‹IDï¼š** CHECKIN-001  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** æäº¤æ‰“å¡ã€æœ‰æ•ˆäºŒç»´ç 

**å‰ç½®æ¡ä»¶ï¼š**
- æ´»åŠ¨IDä¸º1ï¼ŒçŠ¶æ€ä¸º ONGOING
- æ‰“å¡äºŒç»´ç IDä¸º1ï¼ŒçŠ¶æ€ä¸º enabledï¼Œæœªè¿‡æœŸ
- æ•™å­¦ç‚¹IDä¸º1å­˜åœ¨

**æµ‹è¯•æ­¥éª¤ï¼š**

1. è·å–æ‰“å¡äºŒç»´ç token
```sql
SELECT token FROM qrcodes WHERE id = 1 AND type = 'checkin';
```

2. æäº¤æ‰“å¡
```bash
curl -X POST "http://localhost:8080/api/checkins/checkin" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<äºŒç»´ç token>",
    "teachingPointId": 1,
    "attendeeCount": 30
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… success = true
- âœ… è¿”å›æ‰“å¡ä¿¡æ¯ï¼š
  - checkinIdï¼šæ‰“å¡ID
  - submittedTimeï¼šæäº¤æ—¶é—´
  - messageï¼šæˆåŠŸæ¶ˆæ¯

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æ‰“å¡æˆåŠŸ",
  "data": {
    "success": true,
    "checkinId": 1,
    "submittedTime": "2024-11-01T10:30:00",
    "message": "æ‰“å¡æäº¤æˆåŠŸ"
  }
}
```

**éªŒè¯æ­¥éª¤ï¼š**
```sql
-- éªŒè¯æ‰“å¡è®°å½•
SELECT id, activity_id, teaching_point_id, attendee_count, submitted_time 
FROM checkins 
WHERE activity_id = 1 AND teaching_point_id = 1;
```

---

## æµ‹è¯•ç”¨ä¾‹ 3.2ï¼šé˜²é‡å¤æ‰“å¡ï¼ˆå¹‚ç­‰æ€§ï¼‰

**ç”¨ä¾‹IDï¼š** CHECKIN-002  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** å¹‚ç­‰æ€§ã€é˜²é‡å¤

**å‰ç½®æ¡ä»¶ï¼š**
- æ´»åŠ¨1ã€æ•™å­¦ç‚¹1å·²ç»æ‰“è¿‡å¡
- åŒä¸€ä¸ªæ‰“å¡äºŒç»´ç 

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
# ç¬¬ä¸€æ¬¡æ‰“å¡ï¼ˆå·²åœ¨ä¸Šä¸€ä¸ªæµ‹è¯•ä¸­å®Œæˆï¼‰
# ç°åœ¨å°è¯•ç¬¬äºŒæ¬¡æ‰“å¡

curl -X POST "http://localhost:8080/api/checkins/checkin" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<äºŒç»´ç token>",
    "teachingPointId": 1,
    "attendeeCount": 35
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 400 æˆ– 409ï¼ˆå†²çª/é‡å¤ï¼‰
- âœ… è¿”å›é”™è¯¯æ¶ˆæ¯ï¼š"è¯¥æ´»åŠ¨çš„æ•™å­¦ç‚¹å·²æ‰“è¿‡å¡ï¼Œä¸å¯é‡å¤æ‰“å¡"
- âœ… æ•°æ®åº“ä¸­ä»åªæœ‰ä¸€æ¡æ‰“å¡è®°å½•

**éªŒè¯æ­¥éª¤ï¼š**
```sql
-- éªŒè¯ä»åªæœ‰ä¸€æ¡è®°å½•
SELECT COUNT(*) FROM checkins WHERE activity_id = 1 AND teaching_point_id = 1;
```

---

## æµ‹è¯•ç”¨ä¾‹ 3.3ï¼šæäº¤æ‰“å¡å‚æ•°æ ¡éªŒ

**ç”¨ä¾‹IDï¼š** CHECKIN-003  
**ä¼˜å…ˆçº§ï¼š** â­â­â­ (ä¸­)  
**å…³é”®è¯ï¼š** å‚æ•°éªŒè¯

### åœºæ™¯1ï¼šç¼ºå°‘token
```bash
curl -X POST "http://localhost:8080/api/checkins/checkin" \
  -H "Content-Type: application/json" \
  -d '{
    "teachingPointId": 1,
    "attendeeCount": 30
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… é”™è¯¯æ¶ˆæ¯ï¼š"tokenä¸èƒ½ä¸ºç©º"

### åœºæ™¯2ï¼šå‚ä¸äººæ•°ä¸º0
```bash
curl -X POST "http://localhost:8080/api/checkins/checkin" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<token>",
    "teachingPointId": 1,
    "attendeeCount": 0
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… é”™è¯¯æ¶ˆæ¯ï¼š"å‚ä¸äººæ•°å¿…é¡»å¤§äº0"

### åœºæ™¯3ï¼šæ•™å­¦ç‚¹IDæ— æ•ˆ
```bash
curl -X POST "http://localhost:8080/api/checkins/checkin" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<token>",
    "teachingPointId": 0,
    "attendeeCount": 30
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… é”™è¯¯æ¶ˆæ¯ï¼š"æ•™å­¦ç‚¹IDå¿…é¡»å¤§äº0"

---

## æµ‹è¯•ç”¨ä¾‹ 3.4ï¼šæ— æ•ˆçš„äºŒç»´ç æäº¤æ‰“å¡

**ç”¨ä¾‹IDï¼š** CHECKIN-004  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** é”™è¯¯å¤„ç†ã€æ— æ•ˆäºŒç»´ç 

### åœºæ™¯1ï¼šå·²ç¦ç”¨çš„äºŒç»´ç 
```bash
curl -X POST "http://localhost:8080/api/checkins/checkin" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<å·²ç¦ç”¨äºŒç»´ç çš„token>",
    "teachingPointId": 1,
    "attendeeCount": 30
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… é”™è¯¯æ¶ˆæ¯ï¼š"äºŒç»´ç å·²è¢«ç¦ç”¨"

### åœºæ™¯2ï¼šè¿‡æœŸçš„äºŒç»´ç 
```bash
curl -X POST "http://localhost:8080/api/checkins/checkin" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<å·²è¿‡æœŸäºŒç»´ç çš„token>",
    "teachingPointId": 1,
    "attendeeCount": 30
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… é”™è¯¯æ¶ˆæ¯ï¼š"äºŒç»´ç å·²è¿‡æœŸ"

### åœºæ™¯3ï¼šè¯„ä»·äºŒç»´ç ï¼ˆé”™è¯¯çš„ç±»å‹ï¼‰
```bash
curl -X POST "http://localhost:8080/api/checkins/checkin" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<è¯„ä»·äºŒç»´ç çš„token>",
    "teachingPointId": 1,
    "attendeeCount": 30
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… é”™è¯¯æ¶ˆæ¯ï¼š"äºŒç»´ç ç±»å‹ä¸æ˜¯æ‰“å¡ç±»å‹"

---

## æµ‹è¯•ç”¨ä¾‹ 3.5ï¼šæ´»åŠ¨å·²ç»“æŸæ‰“å¡å¤±è´¥

**ç”¨ä¾‹IDï¼š** CHECKIN-005  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** æ´»åŠ¨çŠ¶æ€æ ¡éªŒ

**å‰ç½®æ¡ä»¶ï¼š**
- æ´»åŠ¨å·²è¢«æ ‡è®°ä¸º FINISHED
- æ‰“å¡äºŒç»´ç å·²ç¦ç”¨

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X POST "http://localhost:8080/api/checkins/checkin" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<å·²ç»“æŸæ´»åŠ¨çš„æ‰“å¡äºŒç»´ç token>",
    "teachingPointId": 10,
    "attendeeCount": 25
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 400
- âœ… é”™è¯¯æ¶ˆæ¯ï¼š"äºŒç»´ç å·²è¢«ç¦ç”¨" æˆ– "æ´»åŠ¨æœªè¿›è¡Œä¸­"

---

## æµ‹è¯•ç”¨ä¾‹ 3.6ï¼šæŸ¥è¯¢æ‰“å¡è®°å½•ï¼ˆå¸‚çº§ç®¡ç†å‘˜ï¼‰

**ç”¨ä¾‹IDï¼š** CHECKIN-006  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** æŸ¥è¯¢æ‰“å¡ã€æƒé™éš”ç¦»

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- æ•°æ®åº“ä¸­æœ‰å¤šæ¡æ‰“å¡è®°å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
# æŸ¥è¯¢æ‰€æœ‰æ‰“å¡
curl -X GET "http://localhost:8080/api/checkins?current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"

# æŒ‰æ´»åŠ¨è¿‡æ»¤
curl -X GET "http://localhost:8080/api/checkins?activityId=1&current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"

# æŒ‰æ•™å­¦ç‚¹è¿‡æ»¤
curl -X GET "http://localhost:8080/api/checkins?teachingPointId=1&current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›åˆ†é¡µæ•°æ®
- âœ… å¸‚çº§ç®¡ç†å‘˜å¯è§å…¨éƒ¨æ‰“å¡è®°å½•ï¼ˆæ‰€æœ‰å¿ï¼‰

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "activityId": 1,
        "activityName": "2024å¹´ç§‹å­£æ•™å­¦æ´»åŠ¨",
        "teachingPointId": 1,
        "teachingPointName": "æœé˜³åŒºç¬¬ä¸€å°å­¦",
        "attendeeCount": 30,
        "submittedTime": "2024-10-30T14:30:00",
        "county": "æœé˜³åŒº"
      }
    ],
    "total": 15,
    "current": 1,
    "size": 10
  }
}
```

---

## æµ‹è¯•ç”¨ä¾‹ 3.7ï¼šæŸ¥è¯¢æ‰“å¡è®°å½•ï¼ˆå¿çº§ç®¡ç†å‘˜æƒé™éš”ç¦»ï¼‰

**ç”¨ä¾‹IDï¼š** CHECKIN-007  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** æƒé™éš”ç¦»ã€æ•°æ®éš”ç¦»

**å‰ç½®æ¡ä»¶ï¼š**
- å¿çº§ç®¡ç†å‘˜ï¼ˆæœé˜³åŒºï¼‰å·²ç™»å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/checkins?current=1&size=10" \
  -H "Authorization: Bearer ${COUNTY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… ä»…è¿”å›æœé˜³åŒºçš„æ‰“å¡è®°å½•
- âœ… ä¸è¿”å›å…¶ä»–å¿åŒºçš„æ•°æ®

**éªŒè¯è¦ç‚¹ï¼š**
- âœ… æ‰€æœ‰è®°å½•çš„ county éƒ½æ˜¯ "æœé˜³åŒº"
- âœ… total <= 5ï¼ˆæœé˜³åŒºçš„æ•™å­¦ç‚¹æ•°ï¼‰

---

## æµ‹è¯•ç”¨ä¾‹ 3.8ï¼šæŸ¥è¯¢æ‰“å¡ç»Ÿè®¡ï¼ˆå¸‚çº§ç®¡ç†å‘˜ï¼‰

**ç”¨ä¾‹IDï¼š** CHECKIN-008  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** æ‰“å¡ç»Ÿè®¡ã€å‚ä¸äººæ•°ã€æ•™å­¦ç‚¹æ•°

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- æ´»åŠ¨IDä¸º1æœ‰æ‰“å¡è®°å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/checkins/statistics/1" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›ç»Ÿè®¡ä¿¡æ¯ï¼š
  - activityIdï¼š1
  - participatingTeachingPointsï¼š15
  - totalAttendeesï¼š420

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "activityId": 1,
    "participatingTeachingPoints": 15,
    "totalAttendees": 420
  }
}
```

---

## æµ‹è¯•ç”¨ä¾‹ 3.9ï¼šæŸ¥è¯¢æ‰“å¡ç»Ÿè®¡ï¼ˆå¿çº§ç®¡ç†å‘˜ï¼‰

**ç”¨ä¾‹IDï¼š** CHECKIN-009  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** æƒé™éš”ç¦»ã€ç»Ÿè®¡

**å‰ç½®æ¡ä»¶ï¼š**
- å¿çº§ç®¡ç†å‘˜ï¼ˆæœé˜³åŒºï¼‰å·²ç™»å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/checkins/statistics/1" \
  -H "Authorization: Bearer ${COUNTY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… ä»…ç»Ÿè®¡æœé˜³åŒºçš„æ‰“å¡æ•°æ®
- âœ… participatingTeachingPoints = 5
- âœ… totalAttendees = 150ï¼ˆæœé˜³åŒºçš„æ€»äººæ•°ï¼‰

---

## æµ‹è¯•ç”¨ä¾‹ 3.10ï¼šæœªç™»å½•è®¿é—®ç®¡ç†å‘˜æ¥å£

**ç”¨ä¾‹IDï¼š** CHECKIN-010  
**ä¼˜å…ˆçº§ï¼š** â­â­â­ (ä¸­)  
**å…³é”®è¯ï¼š** æƒé™éªŒè¯ã€æœªè®¤è¯

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
# ä¸æä¾›Authorization header
curl -X GET "http://localhost:8080/api/checkins?current=1&size=10" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 401
- âœ… è¿”å›é”™è¯¯æ¶ˆæ¯ï¼š"æœªæˆæƒ" æˆ– "è¯·ç™»å½•"

---

---

# ç¬¬å››éƒ¨åˆ†ï¼šæ´»åŠ¨è¯„ä»·æ¨¡å—æµ‹è¯•ç”¨ä¾‹

## æ¨¡å—æ¦‚è¿°

æ´»åŠ¨è¯„ä»·æ¨¡å—è´Ÿè´£å¤„ç†æ•™å­¦ç‚¹çš„è¯„ä»·æäº¤ã€æ•°æ®æŸ¥è¯¢å’Œç»Ÿè®¡åŠŸèƒ½ã€‚

### æ ¸å¿ƒAPI

| æ–¹æ³• | è·¯å¾„ | æƒé™ | åŠŸèƒ½ |
|------|------|------|------|
| POST | `/api/evaluations/evaluation` | æ— éœ€è®¤è¯ | æäº¤è¯„ä»· |
| GET | `/api/evaluations` | å¸‚/å¿çº§ | æŸ¥è¯¢è¯„ä»·è®°å½• |
| GET | `/api/evaluations/statistics` | å¸‚/å¿çº§ | æŸ¥è¯¢è¯„ä»·ç»Ÿè®¡ |

---

## æµ‹è¯•ç”¨ä¾‹ 4.1ï¼šæäº¤æœ‰æ•ˆè¯„ä»·

**ç”¨ä¾‹IDï¼š** EVALUATION-001  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** æäº¤è¯„ä»·ã€æœ‰æ•ˆäºŒç»´ç ã€æ´»åŠ¨å·²ç»“æŸ

**å‰ç½®æ¡ä»¶ï¼š**
- æ´»åŠ¨IDä¸º1ï¼ŒçŠ¶æ€ä¸º FINISHED
- è¯„ä»·äºŒç»´ç IDä¸º2ï¼ŒçŠ¶æ€ä¸º enabledï¼Œæœªè¿‡æœŸ
- æ•™å­¦ç‚¹IDä¸º1å·²æœ‰æ‰“å¡è®°å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

1. è·å–è¯„ä»·äºŒç»´ç token
```sql
SELECT token FROM qrcodes WHERE id = 2 AND type = 'evaluation';
```

2. æäº¤è¯„ä»·
```bash
curl -X POST "http://localhost:8080/api/evaluations/evaluation" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<è¯„ä»·äºŒç»´ç token>",
    "teachingPointId": 1,
    "q1Satisfaction": 3,
    "q2Practicality": 2,
    "q3Quality": 3,
    "suggestionText": "å¸Œæœ›èƒ½å¢åŠ æ›´å¤šäº’åŠ¨ç¯èŠ‚"
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… success = true
- âœ… è¿”å›è¯„ä»·ä¿¡æ¯ï¼š
  - evaluationIdï¼šè¯„ä»·ID
  - submittedTimeï¼šæäº¤æ—¶é—´

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "è¯„ä»·æäº¤æˆåŠŸ",
  "data": {
    "success": true,
    "evaluationId": 1,
    "submittedTime": "2024-11-01T14:30:00",
    "message": "è¯„ä»·æäº¤æˆåŠŸ"
  }
}
```

**éªŒè¯æ­¥éª¤ï¼š**
```sql
-- éªŒè¯è¯„ä»·è®°å½•
SELECT id, activity_id, teaching_point_id, q1_satisfaction, q2_practicality, q3_quality, suggestion_text 
FROM evaluations 
WHERE activity_id = 1 AND teaching_point_id = 1;
```

---

## æµ‹è¯•ç”¨ä¾‹ 4.2ï¼šé˜²é‡å¤è¯„ä»·ï¼ˆå¹‚ç­‰æ€§ï¼‰

**ç”¨ä¾‹IDï¼š** EVALUATION-002  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** å¹‚ç­‰æ€§ã€é˜²é‡å¤è¯„ä»·

**å‰ç½®æ¡ä»¶ï¼š**
- æ´»åŠ¨1ã€æ•™å­¦ç‚¹1å·²ç»è¯„ä»·è¿‡

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X POST "http://localhost:8080/api/evaluations/evaluation" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<è¯„ä»·äºŒç»´ç token>",
    "teachingPointId": 1,
    "q1Satisfaction": 3,
    "q2Practicality": 3,
    "q3Quality": 3,
    "suggestionText": "ä¿®æ”¹å»ºè®®å†…å®¹"
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 400 æˆ– 409
- âœ… è¿”å›é”™è¯¯æ¶ˆæ¯ï¼š"è¯¥æ´»åŠ¨çš„æ•™å­¦ç‚¹å·²è¯„ä»·è¿‡ï¼Œä¸å¯é‡å¤è¯„ä»·"
- âœ… æ•°æ®åº“ä¸­ä»åªæœ‰ä¸€æ¡è¯„ä»·è®°å½•

---

## æµ‹è¯•ç”¨ä¾‹ 4.3ï¼šæ´»åŠ¨æœªç»“æŸæ— æ³•è¯„ä»·

**ç”¨ä¾‹IDï¼š** EVALUATION-003  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** æ´»åŠ¨çŠ¶æ€æ£€æŸ¥

**å‰ç½®æ¡ä»¶ï¼š**
- æ´»åŠ¨IDä¸º2ï¼ŒçŠ¶æ€ä¸º ONGOINGï¼ˆæ´»åŠ¨è¿›è¡Œä¸­ï¼‰

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X POST "http://localhost:8080/api/evaluations/evaluation" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<æ´»åŠ¨2çš„è¯„ä»·äºŒç»´ç token>",
    "teachingPointId": 1,
    "q1Satisfaction": 3,
    "q2Practicality": 2,
    "q3Quality": 3,
    "suggestionText": "å»ºè®®"
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 400
- âœ… è¿”å›é”™è¯¯æ¶ˆæ¯ï¼š"æ´»åŠ¨æœªç»“æŸï¼Œä¸å…è®¸è¯„ä»·"

---

## æµ‹è¯•ç”¨ä¾‹ 4.4ï¼šæœªå‚ä¸æ´»åŠ¨æ— æ³•è¯„ä»·

**ç”¨ä¾‹IDï¼š** EVALUATION-004  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** å‚ä¸èµ„æ ¼æ£€æŸ¥

**å‰ç½®æ¡ä»¶ï¼š**
- æ´»åŠ¨å·²ç»“æŸ
- æ•™å­¦ç‚¹IDä¸º100ï¼ˆè¯¥æ•™å­¦ç‚¹æœªæ‰“è¿‡å¡ï¼‰

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X POST "http://localhost:8080/api/evaluations/evaluation" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<è¯„ä»·äºŒç»´ç token>",
    "teachingPointId": 100,
    "q1Satisfaction": 3,
    "q2Practicality": 2,
    "q3Quality": 3,
    "suggestionText": "å»ºè®®"
  }'
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 400
- âœ… è¿”å›é”™è¯¯æ¶ˆæ¯ï¼š"æ— æ‰“å¡è®°å½•ï¼Œæ— æ³•è¯„ä»·"

---

## æµ‹è¯•ç”¨ä¾‹ 4.5ï¼šæäº¤è¯„ä»·å‚æ•°æ ¡éªŒ

**ç”¨ä¾‹IDï¼š** EVALUATION-005  
**ä¼˜å…ˆçº§ï¼š** â­â­â­ (ä¸­)  
**å…³é”®è¯ï¼š** å‚æ•°éªŒè¯

### åœºæ™¯1ï¼šæ»¡æ„åº¦è¯„åˆ†è¶…å‡ºèŒƒå›´
```bash
curl -X POST "http://localhost:8080/api/evaluations/evaluation" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<token>",
    "teachingPointId": 1,
    "q1Satisfaction": 5,
    "q2Practicality": 2,
    "q3Quality": 3,
    "suggestionText": "å»ºè®®"
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… é”™è¯¯æ¶ˆæ¯ï¼š"æ»¡æ„åº¦è¯„åˆ†å¿…é¡»åœ¨1-3ä¹‹é—´"

### åœºæ™¯2ï¼šå»ºè®®æ–‡æœ¬è¶…é•¿
```bash
curl -X POST "http://localhost:8080/api/evaluations/evaluation" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "<token>",
    "teachingPointId": 1,
    "q1Satisfaction": 3,
    "q2Practicality": 2,
    "q3Quality": 3,
    "suggestionText": "è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿çš„å»ºè®®æ–‡æœ¬ï¼Œè¶…è¿‡äº†200å­—çš„é™åˆ¶ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿çš„å»ºè®®æ–‡æœ¬ï¼Œè¶…è¿‡äº†200å­—çš„é™åˆ¶ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿çš„å»ºè®®æ–‡æœ¬ï¼Œè¶…è¿‡äº†200å­—çš„é™åˆ¶ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿çš„å»ºè®®æ–‡æœ¬ï¼Œè¶…è¿‡äº†200å­—çš„é™åˆ¶ã€‚"
  }'
```

**é¢„æœŸç»“æœï¼š**
- âœ… HTTP 400
- âœ… é”™è¯¯æ¶ˆæ¯ï¼š"å»ºè®®æ–‡æœ¬ä¸èƒ½è¶…è¿‡200å­—"

---

## æµ‹è¯•ç”¨ä¾‹ 4.6ï¼šæŸ¥è¯¢è¯„ä»·åˆ—è¡¨ï¼ˆå¸‚çº§ç®¡ç†å‘˜ï¼‰

**ç”¨ä¾‹IDï¼š** EVALUATION-006  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** æŸ¥è¯¢è¯„ä»·ã€æƒé™éš”ç¦»

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- æ•°æ®åº“ä¸­æœ‰å¤šæ¡è¯„ä»·è®°å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
# æŸ¥è¯¢æ‰€æœ‰è¯„ä»·
curl -X GET "http://localhost:8080/api/evaluations?current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"

# æŒ‰æ´»åŠ¨è¿‡æ»¤
curl -X GET "http://localhost:8080/api/evaluations?activityId=1&current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"

# æŒ‰æ•™å­¦ç‚¹è¿‡æ»¤
curl -X GET "http://localhost:8080/api/evaluations?teachingPointId=1&current=1&size=10" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›åˆ†é¡µæ•°æ®
- âœ… å¸‚çº§ç®¡ç†å‘˜å¯è§å…¨éƒ¨è¯„ä»·è®°å½•ï¼ˆæ‰€æœ‰å¿ï¼‰

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "activityId": 1,
        "activityName": "2024å¹´ç§‹å­£æ•™å­¦æ´»åŠ¨",
        "teachingPointId": 1,
        "teachingPointName": "æœé˜³åŒºç¬¬ä¸€å°å­¦",
        "q1Satisfaction": 3,
        "q2Practicality": 2,
        "q3Quality": 3,
        "suggestionText": "å¸Œæœ›èƒ½å¢åŠ æ›´å¤šäº’åŠ¨ç¯èŠ‚",
        "submittedTime": "2024-11-01T14:30:00"
      }
    ],
    "total": 15,
    "current": 1,
    "size": 10
  }
}
```

---

## æµ‹è¯•ç”¨ä¾‹ 4.7ï¼šæŸ¥è¯¢è¯„ä»·åˆ—è¡¨ï¼ˆå¿çº§ç®¡ç†å‘˜æƒé™éš”ç¦»ï¼‰

**ç”¨ä¾‹IDï¼š** EVALUATION-007  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** æƒé™éš”ç¦»ã€æ•°æ®éš”ç¦»

**å‰ç½®æ¡ä»¶ï¼š**
- å¿çº§ç®¡ç†å‘˜ï¼ˆæœé˜³åŒºï¼‰å·²ç™»å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/evaluations?current=1&size=10" \
  -H "Authorization: Bearer ${COUNTY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… ä»…è¿”å›æœé˜³åŒºçš„è¯„ä»·è®°å½•
- âœ… ä¸è¿”å›å…¶ä»–å¿åŒºçš„æ•°æ®

---

## æµ‹è¯•ç”¨ä¾‹ 4.8ï¼šæŸ¥è¯¢è¯„ä»·ç»Ÿè®¡ï¼ˆå¸‚çº§ç®¡ç†å‘˜ï¼‰

**ç”¨ä¾‹IDï¼š** EVALUATION-008  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (å¿…é¡»)  
**å…³é”®è¯ï¼š** è¯„ä»·ç»Ÿè®¡ã€æ»¡æ„åº¦åˆ†æ

**å‰ç½®æ¡ä»¶ï¼š**
- å¸‚çº§ç®¡ç†å‘˜å·²ç™»å½•
- æ´»åŠ¨IDä¸º1æœ‰å¤šæ¡è¯„ä»·è®°å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/evaluations/statistics?activityId=1" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… è¿”å›ç»Ÿè®¡ä¿¡æ¯ï¼š
  - totalCountï¼šæ€»è¯„ä»·æ•°
  - avgSatisfactionï¼šæ»¡æ„åº¦å¹³å‡åˆ†
  - avgPracticalityï¼šå®ç”¨æ€§å¹³å‡åˆ†
  - avgQualityï¼šè´¨é‡å¹³å‡åˆ†
  - satisfactionLevel3/2/1Countï¼šå„ç­‰çº§æ•°é‡
  - suggestionCountï¼šåŒ…å«å»ºè®®çš„è¯„ä»·æ•°

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "activityId": 1,
    "totalCount": 15,
    "avgSatisfaction": 2.8,
    "avgPracticality": 2.6,
    "avgQuality": 2.7,
    "satisfactionLevel3": 12,
    "satisfactionLevel2": 2,
    "satisfactionLevel1": 1,
    "suggestionCount": 10
  }
}
```

---

## æµ‹è¯•ç”¨ä¾‹ 4.9ï¼šæŸ¥è¯¢è¯„ä»·ç»Ÿè®¡ï¼ˆå¿çº§ç®¡ç†å‘˜ï¼‰

**ç”¨ä¾‹IDï¼š** EVALUATION-009  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­ (é«˜)  
**å…³é”®è¯ï¼š** æƒé™éš”ç¦»ã€ç»Ÿè®¡

**å‰ç½®æ¡ä»¶ï¼š**
- å¿çº§ç®¡ç†å‘˜ï¼ˆæœé˜³åŒºï¼‰å·²ç™»å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/evaluations/statistics?activityId=1" \
  -H "Authorization: Bearer ${COUNTY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… ä»…ç»Ÿè®¡æœé˜³åŒºçš„è¯„ä»·æ•°æ®
- âœ… totalCount = 5

---

## æµ‹è¯•ç”¨ä¾‹ 4.10ï¼šæ— å‚ä¸è®°å½•çš„æ´»åŠ¨è¯„ä»·ç»Ÿè®¡

**ç”¨ä¾‹IDï¼š** EVALUATION-010  
**ä¼˜å…ˆçº§ï¼š** â­â­â­ (ä¸­)  
**å…³é”®è¯ï¼š** ç©ºæ•°æ®å¤„ç†

**å‰ç½®æ¡ä»¶ï¼š**
- æ´»åŠ¨IDä¸º3ï¼Œæ— è¯„ä»·è®°å½•

**æµ‹è¯•æ­¥éª¤ï¼š**

```bash
curl -X GET "http://localhost:8080/api/evaluations/statistics?activityId=3" \
  -H "Authorization: Bearer ${CITY_ADMIN_TOKEN}" \
  -H "Content-Type: application/json"
```

**é¢„æœŸç»“æœï¼š**

- âœ… HTTP 200
- âœ… totalCount = 0
- âœ… å¹³å‡åˆ†éƒ½ä¸º 0
- âœ… å„ç­‰çº§æ•°é‡éƒ½ä¸º 0

---

---

# ğŸ§ª é›†æˆæµ‹è¯•åœºæ™¯

## åœºæ™¯1ï¼šå®Œæ•´çš„æ´»åŠ¨ç”Ÿå‘½å‘¨æœŸ

**åœºæ™¯IDï¼š** INTEGRATION-001  
**è¦†ç›–æ¨¡å—ï¼š** æ´»åŠ¨ç®¡ç†ã€äºŒç»´ç ç®¡ç†ã€æ‰“å¡ã€è¯„ä»·

**æµç¨‹ï¼š**

1. åˆ›å»ºæ´»åŠ¨
   ```bash
   POST /api/activities
   ```

2. éªŒè¯æ‰“å¡äºŒç»´ç è‡ªåŠ¨ç”Ÿæˆ
   ```bash
   GET /api/activities/1
   ```

3. å‚ä¸è€…é€šè¿‡æ‰“å¡äºŒç»´ç æäº¤æ‰“å¡
   ```bash
   POST /api/checkins/checkin
   ```

4. æŸ¥è¯¢æ‰“å¡ç»Ÿè®¡
   ```bash
   GET /api/checkins/statistics/1
   ```

5. ç»“æŸæ´»åŠ¨
   ```bash
   POST /api/activities/1/finish
   ```

6. å‚ä¸è€…æäº¤è¯„ä»·
   ```bash
   POST /api/evaluations/evaluation
   ```

7. æŸ¥è¯¢è¯„ä»·ç»Ÿè®¡
   ```bash
   GET /api/evaluations/statistics?activityId=1
   ```

**é¢„æœŸç»“æœï¼š**

- âœ… æ‰€æœ‰APIè°ƒç”¨æˆåŠŸ
- âœ… æ•°æ®æµè½¬æ­£ç¡®
- âœ… ç»Ÿè®¡æ•°æ®å‡†ç¡®

---

## åœºæ™¯2ï¼šæƒé™éš”ç¦»éªŒè¯

**åœºæ™¯IDï¼š** INTEGRATION-002  
**è¦†ç›–æ¨¡å—ï¼š** æ‰€æœ‰æ¨¡å—

**æµç¨‹ï¼š**

1. å¸‚çº§ç®¡ç†å‘˜åˆ›å»ºå¸‚çº§æ´»åŠ¨
   ```bash
   POST /api/activities (å¸‚çº§)
   ```

2. å¿çº§ç®¡ç†å‘˜åˆ›å»ºå¿çº§æ´»åŠ¨
   ```bash
   POST /api/activities (å¿çº§)
   ```

3. éªŒè¯æŸ¥è¯¢æƒé™
   ```bash
   GET /api/activities (å¸‚çº§ - çœ‹åˆ°å…¨éƒ¨)
   GET /api/activities (å¿çº§ - ä»…çœ‹æœ¬å¿)
   ```

4. éªŒè¯æ‰“å¡æƒé™
   ```bash
   GET /api/checkins (å¸‚çº§ - å…¨éƒ¨æ•°æ®)
   GET /api/checkins (å¿çº§ - ä»…æœ¬å¿)
   ```

5. éªŒè¯è¯„ä»·æƒé™
   ```bash
   GET /api/evaluations (å¸‚çº§ - å…¨éƒ¨æ•°æ®)
   GET /api/evaluations (å¿çº§ - ä»…æœ¬å¿)
   ```

**é¢„æœŸç»“æœï¼š**

- âœ… å¸‚çº§ç®¡ç†å‘˜èƒ½çœ‹åˆ°å…¨éƒ¨æ•°æ®
- âœ… å¿çº§ç®¡ç†å‘˜åªèƒ½çœ‹åˆ°æœ¬å¿æ•°æ®
- âœ… æƒé™éš”ç¦»æœ‰æ•ˆ

---

# âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

åœ¨æ‰§è¡Œæ‰€æœ‰æµ‹è¯•åï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š

## æ´»åŠ¨ç®¡ç†æ¨¡å—
- [ ] åˆ›å»ºæ´»åŠ¨æˆåŠŸ
- [ ] äºŒç»´ç è‡ªåŠ¨ç”Ÿæˆ
- [ ] æŸ¥è¯¢æ´»åŠ¨åˆ—è¡¨åˆ†é¡µæ­£ç¡®
- [ ] æƒé™éš”ç¦»æœ‰æ•ˆ
- [ ] æ´»åŠ¨è¯¦æƒ…ç»Ÿè®¡æ•°æ®å‡†ç¡®
- [ ] ç»“æŸæ´»åŠ¨åçŠ¶æ€æ­£ç¡®æ›´æ–°
- [ ] æ‰“å¡äºŒç»´ç è¢«ç¦ç”¨ï¼Œè¯„ä»·äºŒç»´ç ä¿ç•™
- [ ] å¿åŸŸç»Ÿè®¡æ•°æ®å‡†ç¡®
- [ ] å‚æ•°æ ¡éªŒæœ‰æ•ˆ
- [ ] é”™è¯¯å¤„ç†å®Œå–„

## äºŒç»´ç ç®¡ç†æ¨¡å—
- [ ] ç”Ÿæˆæ‰“å¡äºŒç»´ç 
- [ ] ç”Ÿæˆè¯„ä»·äºŒç»´ç 
- [ ] æŸ¥è¯¢äºŒç»´ç åˆ—è¡¨
- [ ] äºŒç»´ç è¿‡æ»¤åŠŸèƒ½æ­£ç¡®
- [ ] ç¦ç”¨äºŒç»´ç 
- [ ] éªŒè¯æœ‰æ•ˆäºŒç»´ç 
- [ ] éªŒè¯å·²ç¦ç”¨äºŒç»´ç 
- [ ] éªŒè¯è¿‡æœŸäºŒç»´ç 
- [ ] éªŒè¯æ— æ•ˆtoken
- [ ] å‚æ•°æ ¡éªŒæœ‰æ•ˆ

## æ‰“å¡å‚ä¸æ¨¡å—
- [ ] æäº¤æœ‰æ•ˆæ‰“å¡
- [ ] é˜²é‡å¤æ‰“å¡
- [ ] å‚æ•°æ ¡éªŒæœ‰æ•ˆ
- [ ] æ— æ•ˆäºŒç»´ç æäº¤å¤±è´¥
- [ ] æ´»åŠ¨å·²ç»“æŸæ‰“å¡å¤±è´¥
- [ ] æŸ¥è¯¢æ‰“å¡è®°å½•åˆ†é¡µæ­£ç¡®
- [ ] å¸‚çº§ç®¡ç†å‘˜çœ‹åˆ°å…¨éƒ¨æ•°æ®
- [ ] å¿çº§ç®¡ç†å‘˜æƒé™éš”ç¦»
- [ ] æ‰“å¡ç»Ÿè®¡æ•°æ®å‡†ç¡®
- [ ] æœªè®¤è¯æ— æ³•è®¿é—®ç®¡ç†æ¥å£

## æ´»åŠ¨è¯„ä»·æ¨¡å—
- [ ] æäº¤æœ‰æ•ˆè¯„ä»·
- [ ] é˜²é‡å¤è¯„ä»·
- [ ] æ´»åŠ¨æœªç»“æŸæ— æ³•è¯„ä»·
- [ ] æœªå‚ä¸æ´»åŠ¨æ— æ³•è¯„ä»·
- [ ] å‚æ•°æ ¡éªŒæœ‰æ•ˆ
- [ ] æŸ¥è¯¢è¯„ä»·åˆ—è¡¨åˆ†é¡µæ­£ç¡®
- [ ] å¸‚çº§ç®¡ç†å‘˜çœ‹åˆ°å…¨éƒ¨æ•°æ®
- [ ] å¿çº§ç®¡ç†å‘˜æƒé™éš”ç¦»
- [ ] è¯„ä»·ç»Ÿè®¡æ•°æ®å‡†ç¡®
- [ ] ç©ºæ•°æ®å¤„ç†æ­£ç¡®

## é›†æˆæµ‹è¯•
- [ ] å®Œæ•´æ´»åŠ¨ç”Ÿå‘½å‘¨æœŸæˆåŠŸ
- [ ] æƒé™éš”ç¦»æœ‰æ•ˆ
- [ ] æ•°æ®æµè½¬æ­£ç¡®
- [ ] ç»Ÿè®¡æ•°æ®å‡†ç¡®

---

# ğŸ“Š æ€§èƒ½æµ‹è¯•

## å‹åŠ›æµ‹è¯•é…ç½®

ä½¿ç”¨Apache Benchè¿›è¡Œå‹åŠ›æµ‹è¯•ï¼š

```bash
# å‘é€100ä¸ªå¹¶å‘è¯·æ±‚ï¼ˆæ‰“å¡æ¥å£ï¼‰
ab -c 100 -n 100 \
  -p checkin.json \
  -T application/json \
  "http://localhost:8080/api/checkins/checkin"

# å‘é€100ä¸ªå¹¶å‘è¯·æ±‚ï¼ˆæŸ¥è¯¢æ¥å£ï¼‰
ab -c 100 -n 100 \
  -H "Authorization: Bearer ${TOKEN}" \
  "http://localhost:8080/api/activities"
```

## æ€§èƒ½æŒ‡æ ‡é¢„æœŸ

| æ¥å£ | å¹³å‡å“åº”æ—¶é—´ | 95åˆ†ä½ | 99åˆ†ä½ | æˆåŠŸç‡ |
|------|-----------|--------|--------|--------|
| æäº¤æ‰“å¡ | < 100ms | < 200ms | < 500ms | 100% |
| æäº¤è¯„ä»· | < 100ms | < 200ms | < 500ms | 100% |
| æŸ¥è¯¢æ´»åŠ¨ | < 50ms | < 100ms | < 300ms | 100% |
| æŸ¥è¯¢ç»Ÿè®¡ | < 100ms | < 300ms | < 500ms | 100% |

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.1.0  
**æœ€åæ›´æ–°ï¼š** 2024-11-01  
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ
